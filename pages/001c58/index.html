<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>pm2 | ç¢Œç¢Œæ— ä¸º ğŸª‚ çŸ¥è¯†æ•´ç†</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/wwblog/img/favicon.ico">
    <link rel="stylesheet" href="/wwblog/iconfont/iconfont.css">
    <meta name="description" content="">
    <meta name="keywords" content="">
    
    <link rel="preload" href="/wwblog/assets/css/0.styles.6d915053.css" as="style"><link rel="preload" href="/wwblog/assets/js/app.0e0201b5.js" as="script"><link rel="preload" href="/wwblog/assets/js/3.e40f20a1.js" as="script"><link rel="preload" href="/wwblog/assets/js/1.6112db0e.js" as="script"><link rel="preload" href="/wwblog/assets/js/115.2eabd80f.js" as="script"><link rel="preload" href="/wwblog/assets/js/25.f1c8b165.js" as="script"><link rel="preload" href="/wwblog/assets/js/26.8d4e2030.js" as="script"><link rel="prefetch" href="/wwblog/assets/js/10.ead2052c.js"><link rel="prefetch" href="/wwblog/assets/js/100.8ebd083d.js"><link rel="prefetch" href="/wwblog/assets/js/101.1512be69.js"><link rel="prefetch" href="/wwblog/assets/js/102.1dd604e8.js"><link rel="prefetch" href="/wwblog/assets/js/103.0d2cafa6.js"><link rel="prefetch" href="/wwblog/assets/js/104.2fbbcdf2.js"><link rel="prefetch" href="/wwblog/assets/js/105.034503b5.js"><link rel="prefetch" href="/wwblog/assets/js/106.2377d717.js"><link rel="prefetch" href="/wwblog/assets/js/107.da24425a.js"><link rel="prefetch" href="/wwblog/assets/js/108.8f7a5a17.js"><link rel="prefetch" href="/wwblog/assets/js/109.dac394c5.js"><link rel="prefetch" href="/wwblog/assets/js/11.d6c70d56.js"><link rel="prefetch" href="/wwblog/assets/js/110.f3cc7f27.js"><link rel="prefetch" href="/wwblog/assets/js/111.1c9d4e37.js"><link rel="prefetch" href="/wwblog/assets/js/112.b55d2ee3.js"><link rel="prefetch" href="/wwblog/assets/js/113.bd64cbc8.js"><link rel="prefetch" href="/wwblog/assets/js/114.4e0db573.js"><link rel="prefetch" href="/wwblog/assets/js/116.c5fc07ab.js"><link rel="prefetch" href="/wwblog/assets/js/117.90ec6696.js"><link rel="prefetch" href="/wwblog/assets/js/118.0c9946b3.js"><link rel="prefetch" href="/wwblog/assets/js/119.8c93fe06.js"><link rel="prefetch" href="/wwblog/assets/js/12.03a87e33.js"><link rel="prefetch" href="/wwblog/assets/js/120.3488c313.js"><link rel="prefetch" href="/wwblog/assets/js/121.2ed19331.js"><link rel="prefetch" href="/wwblog/assets/js/122.6cf48a1b.js"><link rel="prefetch" href="/wwblog/assets/js/13.46bc3555.js"><link rel="prefetch" href="/wwblog/assets/js/14.2f0bfdcc.js"><link rel="prefetch" href="/wwblog/assets/js/15.4c613dd6.js"><link rel="prefetch" href="/wwblog/assets/js/16.cc9bbedd.js"><link rel="prefetch" href="/wwblog/assets/js/17.280dccef.js"><link rel="prefetch" href="/wwblog/assets/js/18.17de33cf.js"><link rel="prefetch" href="/wwblog/assets/js/19.da0ee97f.js"><link rel="prefetch" href="/wwblog/assets/js/2.ab0c2f02.js"><link rel="prefetch" href="/wwblog/assets/js/20.52f2efe6.js"><link rel="prefetch" href="/wwblog/assets/js/21.f7274164.js"><link rel="prefetch" href="/wwblog/assets/js/22.2ebcf1dc.js"><link rel="prefetch" href="/wwblog/assets/js/23.6815f8f2.js"><link rel="prefetch" href="/wwblog/assets/js/24.8a643cd0.js"><link rel="prefetch" href="/wwblog/assets/js/27.6883885e.js"><link rel="prefetch" href="/wwblog/assets/js/28.ddf9f934.js"><link rel="prefetch" href="/wwblog/assets/js/29.7322cfb8.js"><link rel="prefetch" href="/wwblog/assets/js/30.c5a1f2f8.js"><link rel="prefetch" href="/wwblog/assets/js/31.1702585e.js"><link rel="prefetch" href="/wwblog/assets/js/32.40241365.js"><link rel="prefetch" href="/wwblog/assets/js/33.8687ea63.js"><link rel="prefetch" href="/wwblog/assets/js/34.be20e881.js"><link rel="prefetch" href="/wwblog/assets/js/35.3e12cae0.js"><link rel="prefetch" href="/wwblog/assets/js/36.8852432d.js"><link rel="prefetch" href="/wwblog/assets/js/37.ea27a75a.js"><link rel="prefetch" href="/wwblog/assets/js/38.92b6828e.js"><link rel="prefetch" href="/wwblog/assets/js/39.78416700.js"><link rel="prefetch" href="/wwblog/assets/js/4.1fce4caa.js"><link rel="prefetch" href="/wwblog/assets/js/40.77a5df24.js"><link rel="prefetch" href="/wwblog/assets/js/41.891302ed.js"><link rel="prefetch" href="/wwblog/assets/js/42.cffd47b0.js"><link rel="prefetch" href="/wwblog/assets/js/43.146bf699.js"><link rel="prefetch" href="/wwblog/assets/js/44.e58b6960.js"><link rel="prefetch" href="/wwblog/assets/js/45.95dd3f6b.js"><link rel="prefetch" href="/wwblog/assets/js/46.ed3b9bab.js"><link rel="prefetch" href="/wwblog/assets/js/47.8799af3d.js"><link rel="prefetch" href="/wwblog/assets/js/48.ce6360bb.js"><link rel="prefetch" href="/wwblog/assets/js/49.5cadd6d1.js"><link rel="prefetch" href="/wwblog/assets/js/5.05f748ed.js"><link rel="prefetch" href="/wwblog/assets/js/50.a73e32f0.js"><link rel="prefetch" href="/wwblog/assets/js/51.7b6e4320.js"><link rel="prefetch" href="/wwblog/assets/js/52.7ae7c224.js"><link rel="prefetch" href="/wwblog/assets/js/53.aa62c86c.js"><link rel="prefetch" href="/wwblog/assets/js/54.84af44c7.js"><link rel="prefetch" href="/wwblog/assets/js/55.d06e043f.js"><link rel="prefetch" href="/wwblog/assets/js/56.ad75a58a.js"><link rel="prefetch" href="/wwblog/assets/js/57.6793b83d.js"><link rel="prefetch" href="/wwblog/assets/js/58.5ca646ac.js"><link rel="prefetch" href="/wwblog/assets/js/59.3e7735bc.js"><link rel="prefetch" href="/wwblog/assets/js/6.ececcadc.js"><link rel="prefetch" href="/wwblog/assets/js/60.f6b57a71.js"><link rel="prefetch" href="/wwblog/assets/js/61.0bc79206.js"><link rel="prefetch" href="/wwblog/assets/js/62.e9a8c735.js"><link rel="prefetch" href="/wwblog/assets/js/63.f57bd9f6.js"><link rel="prefetch" href="/wwblog/assets/js/64.d2ce549c.js"><link rel="prefetch" href="/wwblog/assets/js/65.e076c1d1.js"><link rel="prefetch" href="/wwblog/assets/js/66.1a736f60.js"><link rel="prefetch" href="/wwblog/assets/js/67.fe1bc553.js"><link rel="prefetch" href="/wwblog/assets/js/68.a218fa7b.js"><link rel="prefetch" href="/wwblog/assets/js/69.8c1eecc2.js"><link rel="prefetch" href="/wwblog/assets/js/7.7f333b20.js"><link rel="prefetch" href="/wwblog/assets/js/70.6d2d843c.js"><link rel="prefetch" href="/wwblog/assets/js/71.8c646a4e.js"><link rel="prefetch" href="/wwblog/assets/js/72.988bb703.js"><link rel="prefetch" href="/wwblog/assets/js/73.76e5cdeb.js"><link rel="prefetch" href="/wwblog/assets/js/74.ea7799ad.js"><link rel="prefetch" href="/wwblog/assets/js/75.4098c5e4.js"><link rel="prefetch" href="/wwblog/assets/js/76.5622a084.js"><link rel="prefetch" href="/wwblog/assets/js/77.73a7c5f9.js"><link rel="prefetch" href="/wwblog/assets/js/78.23a1d70a.js"><link rel="prefetch" href="/wwblog/assets/js/79.41179bb5.js"><link rel="prefetch" href="/wwblog/assets/js/80.39a49167.js"><link rel="prefetch" href="/wwblog/assets/js/81.9caefc31.js"><link rel="prefetch" href="/wwblog/assets/js/82.52a0fa2e.js"><link rel="prefetch" href="/wwblog/assets/js/83.74b297fd.js"><link rel="prefetch" href="/wwblog/assets/js/84.4553b153.js"><link rel="prefetch" href="/wwblog/assets/js/85.6ab6f74c.js"><link rel="prefetch" href="/wwblog/assets/js/86.0df5ee36.js"><link rel="prefetch" href="/wwblog/assets/js/87.8b329d5e.js"><link rel="prefetch" href="/wwblog/assets/js/88.cb074483.js"><link rel="prefetch" href="/wwblog/assets/js/89.292c5129.js"><link rel="prefetch" href="/wwblog/assets/js/90.9ef31f3a.js"><link rel="prefetch" href="/wwblog/assets/js/91.f9264fdb.js"><link rel="prefetch" href="/wwblog/assets/js/92.a2300a67.js"><link rel="prefetch" href="/wwblog/assets/js/93.95ac6166.js"><link rel="prefetch" href="/wwblog/assets/js/94.1fbab311.js"><link rel="prefetch" href="/wwblog/assets/js/95.3baa307a.js"><link rel="prefetch" href="/wwblog/assets/js/96.25650bf1.js"><link rel="prefetch" href="/wwblog/assets/js/97.0ee7e940.js"><link rel="prefetch" href="/wwblog/assets/js/98.4713ebb1.js"><link rel="prefetch" href="/wwblog/assets/js/99.cdeadc41.js"><link rel="prefetch" href="/wwblog/assets/js/vendors~docsearch.9fd01095.js">
    <link rel="stylesheet" href="/wwblog/assets/css/0.styles.6d915053.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wwblog/" class="home-link router-link-active"><img src="/wwblog/img/leftLogo.ico" alt="ç¢Œç¢Œæ— ä¸º ğŸª‚ çŸ¥è¯†æ•´ç†" class="logo"> <span class="site-name can-hide">ç¢Œç¢Œæ— ä¸º ğŸª‚ çŸ¥è¯†æ•´ç†</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/wwblog/" class="nav-link">ğŸ”¥ é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸš€ å‰ç«¯" class="dropdown-title"><a href="/wwblog/pages/73309c/" class="link-title">ğŸš€ å‰ç«¯</a> <span class="title" style="display:none;">ğŸš€ å‰ç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>åŸºç¡€</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wwblog/pages/73309c/" class="nav-link">Html</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/ed3de1/" class="nav-link">Css</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/738fa3/" class="nav-link">Less</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/227687/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/d0f169/" class="nav-link">TypeScript</a></li></ul></li><li class="dropdown-item"><h4>æ¡†æ¶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wwblog/pages/44307d/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/087eee/" class="nav-link">Pinia</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/b2b4ce/" class="nav-link">Vite</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/0f8172/" class="nav-link">Webpack</a></li></ul></li><li class="dropdown-item"><h4>å°ç¨‹åº</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wwblog/pages/56b587/" class="nav-link">åŸç”Ÿå°ç¨‹åº</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/dace69/" class="nav-link">Taroå¤šç«¯</a></li></ul></li><li class="dropdown-item"><h4>è·¨å¹³å°</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wwblog/pages/1c2e60/" class="nav-link">Electron ğŸ•³ï¸</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ“— Node" class="dropdown-title"><a href="/wwblog/pages/fa5d34/" class="link-title">ğŸ“— Node</a> <span class="title" style="display:none;">ğŸ“— Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wwblog/pages/fa5d34/" class="nav-link">ğŸ“– Koa</a></li><li class="dropdown-item"><!----> <a href="/wwblog/pages/3a1aae/" class="nav-link">ğŸ“– Express</a></li><li class="dropdown-item"><!----> <a href="/wwblog/pages/4fff19/" class="nav-link">ğŸ“– MySQL</a></li><li class="dropdown-item"><!----> <a href="/wwblog/pages/001c58/" aria-current="page" class="nav-link router-link-exact-active router-link-active">ğŸ“– Package</a></li></ul></div></div><div class="nav-item"><a href="/wwblog/pages/0a6cce/" class="nav-link">ğŸ“˜ Git</a></div><div class="nav-item"><a href="/wwblog/pages/5af5f1/" class="nav-link">ğŸ“’ é¢è¯•é¢˜</a></div><div class="nav-item"><a href="/wwblog/pages/900797/" class="nav-link">ğŸ“™ èµ„æºé“¾æ¥</a></div> <a href="https://github.com/MX-lbw/vuepressBlog" target="_blank" title="GitHub" rel="noopener noreferrer" class="repo-link"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-6163be0c><path d="M5.883 18.653c-.3-.2-.558-.455-.86-.816a50.32 50.32 0 0 1-.466-.579c-.463-.575-.755-.84-1.057-.949a1 1 0 0 1 .676-1.883c.752.27 1.261.735 1.947 1.588c-.094-.117.34.427.433.539c.19.227.33.365.44.438c.204.137.587.196 1.15.14c.023-.382.094-.753.202-1.095C5.38 15.31 3.7 13.396 3.7 9.64c0-1.24.37-2.356 1.058-3.292c-.218-.894-.185-1.975.302-3.192a1 1 0 0 1 .63-.582c.081-.024.127-.035.208-.047c.803-.123 1.937.17 3.415 1.096A11.731 11.731 0 0 1 12 3.315c.912 0 1.818.104 2.684.308c1.477-.933 2.613-1.226 3.422-1.096c.085.013.157.03.218.05a1 1 0 0 1 .616.58c.487 1.216.52 2.297.302 3.19c.691.936 1.058 2.045 1.058 3.293c0 3.757-1.674 5.665-4.642 6.392c.125.415.19.879.19 1.38a300.492 300.492 0 0 1-.012 2.716a1 1 0 0 1-.019 1.958c-1.139.228-1.983-.532-1.983-1.525l.002-.446l.005-.705c.005-.708.007-1.338.007-1.998c0-.697-.183-1.152-.425-1.36c-.661-.57-.326-1.655.54-1.752c2.967-.333 4.337-1.482 4.337-4.66c0-.955-.312-1.744-.913-2.404a1 1 0 0 1-.19-1.045c.166-.414.237-.957.096-1.614l-.01.003c-.491.139-1.11.44-1.858.949a1 1 0 0 1-.833.135A9.626 9.626 0 0 0 12 5.315c-.89 0-1.772.119-2.592.35a1 1 0 0 1-.83-.134c-.752-.507-1.374-.807-1.868-.947c-.144.653-.073 1.194.092 1.607a1 1 0 0 1-.189 1.045C6.016 7.89 5.7 8.694 5.7 9.64c0 3.172 1.371 4.328 4.322 4.66c.865.097 1.201 1.177.544 1.748c-.192.168-.429.732-.429 1.364v3.15c0 .986-.835 1.725-1.96 1.528a1 1 0 0 1-.04-1.962v-.99c-.91.061-1.662-.088-2.254-.485z" fill="currentColor"></path></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/wwblog/" class="nav-link">ğŸ”¥ é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸš€ å‰ç«¯" class="dropdown-title"><a href="/wwblog/pages/73309c/" class="link-title">ğŸš€ å‰ç«¯</a> <span class="title" style="display:none;">ğŸš€ å‰ç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>åŸºç¡€</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wwblog/pages/73309c/" class="nav-link">Html</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/ed3de1/" class="nav-link">Css</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/738fa3/" class="nav-link">Less</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/227687/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/d0f169/" class="nav-link">TypeScript</a></li></ul></li><li class="dropdown-item"><h4>æ¡†æ¶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wwblog/pages/44307d/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/087eee/" class="nav-link">Pinia</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/b2b4ce/" class="nav-link">Vite</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/0f8172/" class="nav-link">Webpack</a></li></ul></li><li class="dropdown-item"><h4>å°ç¨‹åº</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wwblog/pages/56b587/" class="nav-link">åŸç”Ÿå°ç¨‹åº</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/dace69/" class="nav-link">Taroå¤šç«¯</a></li></ul></li><li class="dropdown-item"><h4>è·¨å¹³å°</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wwblog/pages/1c2e60/" class="nav-link">Electron ğŸ•³ï¸</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ“— Node" class="dropdown-title"><a href="/wwblog/pages/fa5d34/" class="link-title">ğŸ“— Node</a> <span class="title" style="display:none;">ğŸ“— Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wwblog/pages/fa5d34/" class="nav-link">ğŸ“– Koa</a></li><li class="dropdown-item"><!----> <a href="/wwblog/pages/3a1aae/" class="nav-link">ğŸ“– Express</a></li><li class="dropdown-item"><!----> <a href="/wwblog/pages/4fff19/" class="nav-link">ğŸ“– MySQL</a></li><li class="dropdown-item"><!----> <a href="/wwblog/pages/001c58/" aria-current="page" class="nav-link router-link-exact-active router-link-active">ğŸ“– Package</a></li></ul></div></div><div class="nav-item"><a href="/wwblog/pages/0a6cce/" class="nav-link">ğŸ“˜ Git</a></div><div class="nav-item"><a href="/wwblog/pages/5af5f1/" class="nav-link">ğŸ“’ é¢è¯•é¢˜</a></div><div class="nav-item"><a href="/wwblog/pages/900797/" class="nav-link">ğŸ“™ èµ„æºé“¾æ¥</a></div> <a href="https://github.com/MX-lbw/vuepressBlog" target="_blank" title="GitHub" rel="noopener noreferrer" class="repo-link"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-6163be0c><path d="M5.883 18.653c-.3-.2-.558-.455-.86-.816a50.32 50.32 0 0 1-.466-.579c-.463-.575-.755-.84-1.057-.949a1 1 0 0 1 .676-1.883c.752.27 1.261.735 1.947 1.588c-.094-.117.34.427.433.539c.19.227.33.365.44.438c.204.137.587.196 1.15.14c.023-.382.094-.753.202-1.095C5.38 15.31 3.7 13.396 3.7 9.64c0-1.24.37-2.356 1.058-3.292c-.218-.894-.185-1.975.302-3.192a1 1 0 0 1 .63-.582c.081-.024.127-.035.208-.047c.803-.123 1.937.17 3.415 1.096A11.731 11.731 0 0 1 12 3.315c.912 0 1.818.104 2.684.308c1.477-.933 2.613-1.226 3.422-1.096c.085.013.157.03.218.05a1 1 0 0 1 .616.58c.487 1.216.52 2.297.302 3.19c.691.936 1.058 2.045 1.058 3.293c0 3.757-1.674 5.665-4.642 6.392c.125.415.19.879.19 1.38a300.492 300.492 0 0 1-.012 2.716a1 1 0 0 1-.019 1.958c-1.139.228-1.983-.532-1.983-1.525l.002-.446l.005-.705c.005-.708.007-1.338.007-1.998c0-.697-.183-1.152-.425-1.36c-.661-.57-.326-1.655.54-1.752c2.967-.333 4.337-1.482 4.337-4.66c0-.955-.312-1.744-.913-2.404a1 1 0 0 1-.19-1.045c.166-.414.237-.957.096-1.614l-.01.003c-.491.139-1.11.44-1.858.949a1 1 0 0 1-.833.135A9.626 9.626 0 0 0 12 5.315c-.89 0-1.772.119-2.592.35a1 1 0 0 1-.83-.134c-.752-.507-1.374-.807-1.868-.947c-.144.653-.073 1.194.092 1.607a1 1 0 0 1-.189 1.045C6.016 7.89 5.7 8.694 5.7 9.64c0 3.172 1.371 4.328 4.322 4.66c.865.097 1.201 1.177.544 1.748c-.192.168-.429.732-.429 1.364v3.15c0 .986-.835 1.725-1.96 1.528a1 1 0 0 1-.04-1.962v-.99c-.91.061-1.662-.088-2.254-.485z" fill="currentColor"></path></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>å†…ç½®æ¨¡å—</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wwblog/pages/1b0e07/" class="sidebar-link">Nodejsæ ¸å¿ƒæ¨¡å—</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Koa</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wwblog/pages/fa5d34/" class="sidebar-link">Koa</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Express</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wwblog/pages/3a1aae/" class="sidebar-link">express</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Mysql</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wwblog/pages/4fff19/" class="sidebar-link">Mysql</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>package</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wwblog/pages/001c58/" aria-current="page" class="active sidebar-link">pm2</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/wwblog/pages/001c58/#å®‰è£…-pm2" class="sidebar-link">å®‰è£… PM2</a></li><li class="sidebar-sub-header level2"><a href="/wwblog/pages/001c58/#å¯åŠ¨ä¸€ä¸ªåº”ç”¨ç¨‹åº" class="sidebar-link">å¯åŠ¨ä¸€ä¸ªåº”ç”¨ç¨‹åº</a></li><li class="sidebar-sub-header level2"><a href="/wwblog/pages/001c58/#æ›´æ–°-pm2" class="sidebar-link">æ›´æ–° PM2</a></li><li class="sidebar-sub-header level2"><a href="/wwblog/pages/001c58/#ç›®å½•ä»‹ç»" class="sidebar-link">ç›®å½•ä»‹ç»</a></li><li class="sidebar-sub-header level2"><a href="/wwblog/pages/001c58/#å…¥é—¨æ•™ç¨‹" class="sidebar-link">å…¥é—¨æ•™ç¨‹</a></li><li class="sidebar-sub-header level2"><a href="/wwblog/pages/001c58/#å¸¸ç”¨å‘½ä»¤" class="sidebar-link">å¸¸ç”¨å‘½ä»¤</a></li><li class="sidebar-sub-header level2"><a href="/wwblog/pages/001c58/#é…ç½®æ–‡ä»¶" class="sidebar-link">é…ç½®æ–‡ä»¶</a></li><li class="sidebar-sub-header level2"><a href="/wwblog/pages/001c58/#è‡ªåŠ¨é‡å¯" class="sidebar-link">è‡ªåŠ¨é‡å¯</a></li><li class="sidebar-sub-header level2"><a href="/wwblog/pages/001c58/#ç¯å¢ƒåˆ‡æ¢" class="sidebar-link">ç¯å¢ƒåˆ‡æ¢</a></li><li class="sidebar-sub-header level2"><a href="/wwblog/pages/001c58/#è´Ÿè½½å‡è¡¡" class="sidebar-link">è´Ÿè½½å‡è¡¡</a></li><li class="sidebar-sub-header level2"><a href="/wwblog/pages/001c58/#æ—¥å¿—æŸ¥çœ‹" class="sidebar-link">æ—¥å¿—æŸ¥çœ‹</a></li><li class="sidebar-sub-header level2"><a href="/wwblog/pages/001c58/#æŒ‡ä»¤-tab-è¡¥å…¨" class="sidebar-link">æŒ‡ä»¤ tab è¡¥å…¨</a></li><li class="sidebar-sub-header level2"><a href="/wwblog/pages/001c58/#å¼€æœºè‡ªåŠ¨å¯åŠ¨" class="sidebar-link">å¼€æœºè‡ªåŠ¨å¯åŠ¨</a></li><li class="sidebar-sub-header level2"><a href="/wwblog/pages/001c58/#ä¼ å…¥-node-args" class="sidebar-link">ä¼ å…¥ node args</a></li><li class="sidebar-sub-header level2"><a href="/wwblog/pages/001c58/#ç›‘æ§-monitor" class="sidebar-link">ç›‘æ§(monitor)</a></li><li class="sidebar-sub-header level2"><a href="/wwblog/pages/001c58/#å†…å­˜ä½¿ç”¨è¶…è¿‡ä¸Šé™è‡ªåŠ¨é‡å¯" class="sidebar-link">å†…å­˜ä½¿ç”¨è¶…è¿‡ä¸Šé™è‡ªåŠ¨é‡å¯</a></li><li class="sidebar-sub-header level2"><a href="/wwblog/pages/001c58/#æ¨¡å—ç³»ç»Ÿ-module-system" class="sidebar-link">æ¨¡å—ç³»ç»Ÿ Module system</a></li></ul></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-f8b55ed6><div class="articleInfo" data-v-f8b55ed6><ul class="breadcrumbs" data-v-f8b55ed6><li data-v-f8b55ed6><a href="/wwblog/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-f8b55ed6></a></li> <li data-v-f8b55ed6><span data-v-f8b55ed6>package</span></li> <!----></ul> <div class="info" data-v-f8b55ed6><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-f8b55ed6><a href="https://github.com/MX-lbw" target="_blank" title="ä½œè€…" class="beLink" data-v-f8b55ed6>wuwei</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-f8b55ed6><a href="javascript:;" data-v-f8b55ed6>2023-04-20</a></div> <div class="page-view" style="margin-left:0;" data-v-47d906e8 data-v-f8b55ed6><div title="æ–‡ç« å­—æ•°" class="book-words iconfont icon-book" data-v-47d906e8><a href="javascript:;" style="margin-left: 3px; color: #888" data-v-47d906e8>0</a></div> <!----> <div title="æµè§ˆé‡" class="page-view iconfont icon-view" data-v-47d906e8><a href="javascript:;" id="busuanzi_value_page_pv" class="view-data" style="color: #888; margin-left: 3px" data-v-47d906e8><i title="æ­£åœ¨è·å–..." class="loading iconfont icon-loading" data-v-47d906e8></i></a></div></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">ç›®å½•</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">pm2<!----></h1> <!----> <div class="theme-vdoing-content content__default"><p>PM2 æ˜¯ node è¿›ç¨‹ç®¡ç†å·¥å…·ï¼Œå¯ä»¥åˆ©ç”¨å®ƒæ¥ç®€åŒ–å¾ˆå¤š node åº”ç”¨ç®¡ç†çš„ç¹çä»»åŠ¡ï¼Œå¦‚æ€§èƒ½ç›‘æ§ã€è‡ªåŠ¨é‡å¯ã€è´Ÿè½½å‡è¡¡ç­‰ï¼Œè€Œä¸”ä½¿ç”¨éå¸¸ç®€å•ã€‚
ä¸‹é¢å°±å¯¹ PM2 è¿›è¡Œå…¥é—¨æ€§çš„ä»‹ç»ï¼ŒåŸºæœ¬æ¶µç›–äº† PM2 çš„å¸¸ç”¨çš„åŠŸèƒ½å’Œé…ç½®</p> <h2 id="å®‰è£…-pm2"><a href="#å®‰è£…-pm2" class="header-anchor">#</a> å®‰è£… PM2</h2> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>$ npm install pm2 <span class="token operator">-</span>g
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="å¯åŠ¨ä¸€ä¸ªåº”ç”¨ç¨‹åº"><a href="#å¯åŠ¨ä¸€ä¸ªåº”ç”¨ç¨‹åº" class="header-anchor">#</a> å¯åŠ¨ä¸€ä¸ªåº”ç”¨ç¨‹åº</h2> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>$ pm2 start app<span class="token punctuation">.</span>js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="æ›´æ–°-pm2"><a href="#æ›´æ–°-pm2" class="header-anchor">#</a> æ›´æ–° PM2</h2> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code><span class="token comment"># å®‰è£…æœ€æ–°çš„pm2</span>
$ pm2 save <span class="token comment"># è®°å¾—ä¿å­˜è¿›ç¨‹çŠ¶æ€</span>
$ npm install pm2 <span class="token operator">-</span>g
$ pm2 update
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="ç›®å½•ä»‹ç»"><a href="#ç›®å½•ä»‹ç»" class="header-anchor">#</a> ç›®å½•ä»‹ç»</h2> <p>pm2 å®‰è£…å¥½åï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä¸‹é¢ç›®å½•ã€‚çœ‹æ–‡ä»¶ååŸºæœ¬å°±çŸ¥é“å¹²å˜›çš„äº†ï¼Œå°±ä¸ç¿»è¯‘äº†ã€‚</p> <ul><li><code>$HOME/.pm2</code> will contain all PM2 related files</li> <li><code>$HOME/.pm2/logs</code> will contain all applications logs</li> <li><code>$HOME/.pm2/pids</code> will contain all applications pids</li> <li><code>$HOME/.pm2/pm2.log</code> PM2 logs</li> <li><code>$HOME/.pm2/pm2.pid</code> PM2 pid</li> <li><code>$HOME/.pm2/rpc.sock</code> Socket file for remote commands</li> <li><code>$HOME/.pm2/pub.sock</code> Socket file for publishable events</li> <li><code>$HOME/.pm2/conf.js</code> PM2 Configuration</li></ul> <h2 id="å…¥é—¨æ•™ç¨‹"><a href="#å…¥é—¨æ•™ç¨‹" class="header-anchor">#</a> å…¥é—¨æ•™ç¨‹</h2> <p>ä¸€èˆ¬æˆ‘ä»¬éƒ½æ˜¯é€šè¿‡<code>npm start</code>å¯åŠ¨åº”ç”¨ï¼Œå…¶å®å°±æ˜¯è°ƒç”¨<code>node ./bin/www</code>ã€‚é‚£ä¹ˆï¼Œæ¢æˆ pm2 å°±æ˜¯</p> <p>æ³¨æ„ï¼Œè¿™é‡Œç”¨äº†<code>--watch</code>å‚æ•°ï¼Œæ„å‘³ç€å½“ä½ çš„ express åº”ç”¨ä»£ç å‘ç”Ÿå˜åŒ–æ—¶ï¼Œpm2 ä¼šå¸®ä½ é‡å¯æœåŠ¡ï¼Œå¤šè´´å¿ƒã€‚</p> <div class="language-undefined line-numbers-mode"><pre class="language-text"><code>pm2 start ./bin/www --watch
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å®˜æ–¹æ–‡æ¡£ï¼š<code>http://pm2.keymetrics.io/docs/usage/quick-start](https://links.jianshu.com/go?to=http%3A%2F%2Fpm2.keymetrics.io%2Fdocs%2Fusage%2Fquick-start</code></p> <h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="header-anchor">#</a> å¸¸ç”¨å‘½ä»¤</h2> <h3 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="header-anchor">#</a> å¯åŠ¨</h3> <p>å‚æ•°è¯´æ˜ï¼š</p> <ul><li><code>--watch</code>ï¼šç›‘å¬åº”ç”¨ç›®å½•çš„å˜åŒ–ï¼Œä¸€æ—¦å‘ç”Ÿå˜åŒ–ï¼Œè‡ªåŠ¨é‡å¯ã€‚å¦‚æœè¦ç²¾ç¡®ç›‘å¬ã€ä¸è§å¬çš„ç›®å½•ï¼Œæœ€å¥½é€šè¿‡é…ç½®æ–‡ä»¶ã€‚</li> <li><code>-i --instances</code>ï¼šå¯ç”¨å¤šå°‘ä¸ªå®ä¾‹ï¼Œå¯ç”¨äºè´Ÿè½½å‡è¡¡ã€‚å¦‚æœ<code>-i 0</code>æˆ–è€…<code>-i max</code>ï¼Œåˆ™æ ¹æ®å½“å‰æœºå™¨æ ¸æ•°ç¡®å®šå®ä¾‹æ•°ç›®ã€‚</li> <li><code>--ignore-watch</code>ï¼šæ’é™¤ç›‘å¬çš„ç›®å½•/æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯ç‰¹å®šçš„æ–‡ä»¶åï¼Œä¹Ÿå¯ä»¥æ˜¯æ­£åˆ™ã€‚æ¯”å¦‚<code>--ignore-watch=&quot;test node_modules &quot;some scripts&quot;&quot;</code></li> <li><code>-n --name</code>ï¼šåº”ç”¨çš„åç§°ã€‚æŸ¥çœ‹åº”ç”¨ä¿¡æ¯çš„æ—¶å€™å¯ä»¥ç”¨åˆ°ã€‚</li> <li><code>-o --output &lt;path&gt;</code>ï¼šæ ‡å‡†è¾“å‡ºæ—¥å¿—æ–‡ä»¶çš„è·¯å¾„ã€‚</li> <li><code>-e --error &lt;path&gt;</code>ï¼šé”™è¯¯è¾“å‡ºæ—¥å¿—æ–‡ä»¶çš„è·¯å¾„ã€‚</li> <li><code>--interpreter &lt;interpreter&gt;</code>ï¼šthe interpreter pm2 should use for executing app (bash, python...)ã€‚æ¯”å¦‚ä½ ç”¨çš„ coffee script æ¥ç¼–å†™åº”ç”¨ã€‚</li></ul> <p>å®Œæ•´å‘½ä»¤è¡Œå‚æ•°åˆ—è¡¨ï¼š<a href="https://links.jianshu.com/go?to=http%3A%2F%2Fpm2.keymetrics.io%2Fdocs%2Fusage%2Fquick-start%2F%23options" target="_blank" rel="noopener noreferrer">åœ°å€<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-css line-numbers-mode"><pre class="language-css"><code>pm2 start app.js --watch -i 2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="é‡å¯"><a href="#é‡å¯" class="header-anchor">#</a> é‡å¯</h3> <div class="language-css line-numbers-mode"><pre class="language-css"><code>pm2 restart app.js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="åœæ­¢"><a href="#åœæ­¢" class="header-anchor">#</a> åœæ­¢</h3> <p>åœæ­¢ç‰¹å®šçš„åº”ç”¨ã€‚å¯ä»¥å…ˆé€šè¿‡<code>pm2 list</code>è·å–åº”ç”¨çš„åå­—ï¼ˆ--name æŒ‡å®šçš„ï¼‰æˆ–è€…è¿›ç¨‹ idã€‚</p> <div class="language-undefined line-numbers-mode"><pre class="language-text"><code>pm2 stop app_name|app_id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å¦‚æœè¦åœæ­¢æ‰€æœ‰åº”ç”¨ï¼Œå¯ä»¥</p> <div class="language-undefined line-numbers-mode"><pre class="language-text"><code>pm2 stop all
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="åˆ é™¤"><a href="#åˆ é™¤" class="header-anchor">#</a> åˆ é™¤</h3> <p>ç±»ä¼¼<code>pm2 stop</code>ï¼Œå¦‚ä¸‹</p> <div class="language-undefined line-numbers-mode"><pre class="language-text"><code>pm2 stop app_name|app_id
pm2 stop all
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€"><a href="#æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€" class="header-anchor">#</a> æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€</h3> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>pm2 list
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="æŸ¥çœ‹æŸä¸ªè¿›ç¨‹çš„ä¿¡æ¯"><a href="#æŸ¥çœ‹æŸä¸ªè¿›ç¨‹çš„ä¿¡æ¯" class="header-anchor">#</a> æŸ¥çœ‹æŸä¸ªè¿›ç¨‹çš„ä¿¡æ¯</h3> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token punctuation">[</span><span class="token label symbol">root@</span>iZ94wb7tioqZ pids<span class="token punctuation">]</span># pm2 describe <span class="token number">0</span>
Describing process with id <span class="token number">0</span> <span class="token operator">-</span> name oc<span class="token operator">-</span>server
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ status            â”‚ online                                                       â”‚
â”‚ name              â”‚ oc<span class="token operator">-</span>server                                                    â”‚
â”‚ id                â”‚ <span class="token number">0</span>                                                            â”‚
â”‚ path              â”‚ <span class="token operator">/</span><span class="token keyword">data</span><span class="token operator">/</span>file<span class="token operator">/</span>qiquan<span class="token operator">/</span>over_the_counter<span class="token operator">/</span>server<span class="token operator">/</span>bin<span class="token operator">/</span>www            â”‚
â”‚ args              â”‚                                                              â”‚
â”‚ exec cwd          â”‚ <span class="token operator">/</span><span class="token keyword">data</span><span class="token operator">/</span>file<span class="token operator">/</span>qiquan<span class="token operator">/</span>over_the_counter<span class="token operator">/</span>server                    â”‚
â”‚ error log path    â”‚ <span class="token operator">/</span><span class="token keyword">data</span><span class="token operator">/</span>file<span class="token operator">/</span>qiquan<span class="token operator">/</span>over_the_counter<span class="token operator">/</span>server<span class="token operator">/</span>logs<span class="token operator">/</span>app<span class="token operator">-</span>err<span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">.</span>log â”‚
â”‚ <span class="token keyword">out</span> log path      â”‚ <span class="token operator">/</span><span class="token keyword">data</span><span class="token operator">/</span>file<span class="token operator">/</span>qiquan<span class="token operator">/</span>over_the_counter<span class="token operator">/</span>server<span class="token operator">/</span>logs<span class="token operator">/</span>app<span class="token operator">-</span><span class="token keyword">out</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">.</span>log â”‚
â”‚ pid path          â”‚ <span class="token operator">/</span>root<span class="token operator">/</span><span class="token punctuation">.</span>pm2<span class="token operator">/</span>pids<span class="token operator">/</span>oc<span class="token operator">-</span>server<span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">.</span>pid                              â”‚
â”‚ mode              â”‚ fork_mode                                                    â”‚
â”‚ node v8 arguments â”‚                                                              â”‚
â”‚ watch &amp; reload    â”‚                                                              â”‚
â”‚ interpreter       â”‚ node                                                         â”‚
â”‚ restarts          â”‚ <span class="token number">293</span>                                                          â”‚
â”‚ unstable restarts â”‚ <span class="token number">0</span>                                                            â”‚
â”‚ uptime            â”‚ 87m                                                          â”‚
â”‚ created at        â”‚ <span class="token number">2016</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span>26T08<span class="token operator">:</span><span class="token number">13</span><span class="token operator">:</span><span class="token number">43</span><span class="token punctuation">.</span>705Z                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="header-anchor">#</a> é…ç½®æ–‡ä»¶</h2> <h3 id="ç®€å•è¯´æ˜"><a href="#ç®€å•è¯´æ˜" class="header-anchor">#</a> ç®€å•è¯´æ˜</h3> <ul><li>é…ç½®æ–‡ä»¶é‡Œçš„è®¾ç½®é¡¹ï¼Œè·Ÿå‘½ä»¤è¡Œå‚æ•°åŸºæœ¬æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚</li> <li>å¯ä»¥é€‰æ‹©<code>yaml</code>æˆ–è€…<code>json</code>æ–‡ä»¶ï¼Œå°±çœ‹ä¸ªäººæ´—å¥½äº†ã€‚</li> <li><code>json</code>æ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œpm2 å½“ä½œæ™®é€šçš„ js æ–‡ä»¶æ¥å¤„ç†ï¼Œæ‰€ä»¥å¯ä»¥åœ¨é‡Œé¢æ·»åŠ æ³¨é‡Šæˆ–è€…ç¼–å†™ä»£ç ï¼Œè¿™å¯¹äºåŠ¨æ€è°ƒæ•´é…ç½®å¾ˆæœ‰å¥½å¤„ã€‚</li> <li>å¦‚æœå¯åŠ¨çš„æ—¶å€™æŒ‡å®šäº†é…ç½®æ–‡ä»¶ï¼Œé‚£ä¹ˆå‘½ä»¤è¡Œå‚æ•°ä¼šè¢«å¿½ç•¥ã€‚ï¼ˆä¸ªåˆ«å‚æ•°é™¤å¤–ï¼Œæ¯”å¦‚--envï¼‰</li></ul> <h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="header-anchor">#</a> ä¾‹å­</h3> <p>ä¸¾ä¸ªç®€å•ä¾‹å­ï¼Œå®Œæ•´é…ç½®è¯´æ˜è¯·å‚è€ƒ<a href="https://links.jianshu.com/go?to=http%3A%2F%2Fpm2.keymetrics.io%2Fdocs%2Fusage%2Fpm2-doc-single-page%2F" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fis-receiver&quot;</span><span class="token punctuation">,</span> <span class="token comment">// åº”ç”¨åç§°</span>
  <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./bin/www&quot;</span><span class="token punctuation">,</span> <span class="token comment">// å®é™…å¯åŠ¨è„šæœ¬</span>
  <span class="token property">&quot;cwd&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span> <span class="token comment">// å½“å‰å·¥ä½œè·¯å¾„</span>
  <span class="token property">&quot;watch&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// ç›‘æ§å˜åŒ–çš„ç›®å½•ï¼Œä¸€æ—¦å˜åŒ–ï¼Œè‡ªåŠ¨é‡å¯</span>
    <span class="token string">&quot;bin&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;routers&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;ignore_watch&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// ä»ç›‘æ§ç›®å½•ä¸­æ’é™¤</span>
    <span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;logs&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;public&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;watch_options&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;followSymlinks&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;error_file&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./logs/app-err.log&quot;</span><span class="token punctuation">,</span> <span class="token comment">// é”™è¯¯æ—¥å¿—è·¯å¾„</span>
  <span class="token property">&quot;out_file&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./logs/app-out.log&quot;</span><span class="token punctuation">,</span> <span class="token comment">// æ™®é€šæ—¥å¿—è·¯å¾„</span>
  <span class="token property">&quot;env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;NODE_ENV&quot;</span><span class="token operator">:</span> <span class="token string">&quot;production&quot;</span> <span class="token comment">// ç¯å¢ƒå‚æ•°ï¼Œå½“å‰æŒ‡å®šä¸ºç”Ÿäº§ç¯å¢ƒ</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="è‡ªåŠ¨é‡å¯"><a href="#è‡ªåŠ¨é‡å¯" class="header-anchor">#</a> è‡ªåŠ¨é‡å¯</h2> <p>å‰é¢å·²ç»æåˆ°äº†ï¼Œè¿™é‡Œè´´å‘½ä»¤è¡Œï¼Œæ›´å¤šç‚¹å‡»<a href="https://links.jianshu.com/go?to=http%3A%2F%2Fpm2.keymetrics.io%2Fdocs%2Fusage%2Fwatch-and-restart%2F%23auto-restart-apps-on-file-change" target="_blank" rel="noopener noreferrer">è¿™é‡Œ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code>pm2 start app.js --watch
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>è¿™é‡Œæ˜¯ç›‘æ§æ•´ä¸ªé¡¹ç›®çš„æ–‡ä»¶ï¼Œå¦‚æœåªæƒ³ç›‘å¬æŒ‡å®šæ–‡ä»¶å’Œç›®å½•ï¼Œå»ºè®®é€šè¿‡é…ç½®æ–‡ä»¶çš„<code>watch</code>ã€<code>ignore_watch</code>å­—æ®µæ¥è®¾ç½®ã€‚</p> <h2 id="ç¯å¢ƒåˆ‡æ¢"><a href="#ç¯å¢ƒåˆ‡æ¢" class="header-anchor">#</a> ç¯å¢ƒåˆ‡æ¢</h2> <p>åœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­ï¼Œæˆ‘ä»¬çš„åº”ç”¨ç»å¸¸éœ€è¦åœ¨å¤šä¸ªç¯å¢ƒä¸‹éƒ¨ç½²ï¼Œæ¯”å¦‚å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€ç”Ÿäº§ç¯å¢ƒç­‰ã€‚åœ¨ä¸åŒç¯å¢ƒä¸‹ï¼Œæœ‰æ—¶å€™é…ç½®é¡¹ä¼šæœ‰å·®å¼‚ï¼Œæ¯”å¦‚é“¾æ¥çš„æ•°æ®åº“åœ°å€ä¸åŒç­‰ã€‚</p> <p>å¯¹äºè¿™ç§åœºæ™¯ï¼Œpm2 ä¹Ÿæ˜¯å¯ä»¥å¾ˆå¥½æ”¯æŒçš„ã€‚é¦–å…ˆé€šè¿‡åœ¨é…ç½®æ–‡ä»¶ä¸­é€šè¿‡<code>env_xx</code>æ¥å£°æ˜ä¸åŒç¯å¢ƒçš„é…ç½®ï¼Œç„¶ååœ¨å¯åŠ¨åº”ç”¨æ—¶ï¼Œé€šè¿‡<code>--env</code>å‚æ•°æŒ‡å®šè¿è¡Œçš„ç¯å¢ƒã€‚</p> <h3 id="ç¯å¢ƒé…ç½®å£°æ˜"><a href="#ç¯å¢ƒé…ç½®å£°æ˜" class="header-anchor">#</a> ç¯å¢ƒé…ç½®å£°æ˜</h3> <p>é¦–å…ˆï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œé€šè¿‡<code>env</code>é€‰é¡¹å£°æ˜å¤šä¸ªç¯å¢ƒé…ç½®ã€‚ç®€å•è¯´æ˜ä¸‹ï¼š</p> <ul><li><code>env</code>ä¸ºé»˜è®¤çš„ç¯å¢ƒé…ç½®ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰ï¼Œ<code>env_dev</code>ã€<code>env_test</code>åˆ™åˆ†åˆ«æ˜¯å¼€å‘ã€æµ‹è¯•ç¯å¢ƒã€‚å¯ä»¥çœ‹åˆ°ï¼Œä¸åŒç¯å¢ƒä¸‹çš„<code>NODE_ENV</code>ã€<code>REMOTE_ADDR</code>å­—æ®µçš„å€¼æ˜¯ä¸åŒçš„ã€‚</li> <li>åœ¨åº”ç”¨ä¸­ï¼Œå¯ä»¥é€šè¿‡<code>process.env.REMOTE_ADDR</code>ç­‰æ¥è¯»å–é…ç½®ä¸­ç”Ÿå‘½çš„å˜é‡ã€‚</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>  <span class="token string">&quot;env&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;NODE_ENV&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;production&quot;</span>,
    <span class="token string">&quot;REMOTE_ADDR&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;http://www.example.com/&quot;</span>
  <span class="token punctuation">}</span>,
  <span class="token string">&quot;env_dev&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;NODE_ENV&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;development&quot;</span>,
    <span class="token string">&quot;REMOTE_ADDR&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;http://wdev.example.com/&quot;</span>
  <span class="token punctuation">}</span>,
  <span class="token string">&quot;env_test&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;NODE_ENV&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;test&quot;</span>,
    <span class="token string">&quot;REMOTE_ADDR&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;http://wtest.example.com/&quot;</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="å¯åŠ¨æŒ‡æ˜ç¯å¢ƒ"><a href="#å¯åŠ¨æŒ‡æ˜ç¯å¢ƒ" class="header-anchor">#</a> å¯åŠ¨æŒ‡æ˜ç¯å¢ƒ</h3> <p>å‡è®¾é€šè¿‡ä¸‹é¢å¯åŠ¨è„šæœ¬ï¼ˆå¼€å‘ç¯å¢ƒï¼‰ï¼Œé‚£ä¹ˆï¼Œæ­¤æ—¶<code>process.env.REMOTE_ADDR</code>çš„å€¼å°±æ˜¯ç›¸åº”çš„ <a href="https://links.jianshu.com/go?to=http%3A%2F%2Fwdev.example.com%2F" target="_blank" rel="noopener noreferrer">http://wdev.example.com/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼Œå¯ä»¥è‡ªå·±è¯•éªŒä¸‹ã€‚</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code>pm2 start app.js --env dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="è´Ÿè½½å‡è¡¡"><a href="#è´Ÿè½½å‡è¡¡" class="header-anchor">#</a> è´Ÿè½½å‡è¡¡</h2> <p>å‘½ä»¤å¦‚ä¸‹ï¼Œè¡¨ç¤ºå¼€å¯ä¸‰ä¸ªè¿›ç¨‹ã€‚å¦‚æœ<code>-i 0</code>ï¼Œåˆ™ä¼šæ ¹æ®æœºå™¨å½“å‰æ ¸æ•°è‡ªåŠ¨å¼€å¯å°½å¯èƒ½å¤šçš„è¿›ç¨‹ã€‚</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>pm2 start app.js <span class="token parameter variable">-i</span> <span class="token number">3</span> <span class="token comment"># å¼€å¯ä¸‰ä¸ªè¿›ç¨‹</span>
pm2 start app.js <span class="token parameter variable">-i</span> max <span class="token comment"># æ ¹æ®æœºå™¨CPUæ ¸æ•°ï¼Œå¼€å¯å¯¹åº”æ•°ç›®çš„è¿›ç¨‹</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å‚è€ƒæ–‡æ¡£ï¼š<a href="https://links.jianshu.com/go?to=http%3A%2F%2Fpm2.keymetrics.io%2Fdocs%2Fusage%2Fcluster-mode%2F%23automatic-load-balancing" target="_blank" rel="noopener noreferrer">ç‚¹å‡»æŸ¥çœ‹<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="æ—¥å¿—æŸ¥çœ‹"><a href="#æ—¥å¿—æŸ¥çœ‹" class="header-anchor">#</a> æ—¥å¿—æŸ¥çœ‹</h2> <p>é™¤äº†å¯ä»¥æ‰“å¼€æ—¥å¿—æ–‡ä»¶æŸ¥çœ‹æ—¥å¿—å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡<code>pm2 logs</code>æ¥æŸ¥çœ‹å®æ—¶æ—¥å¿—ã€‚è¿™ç‚¹å¯¹äºçº¿ä¸Šé—®é¢˜æ’æŸ¥éå¸¸é‡è¦ã€‚</p> <p>æ¯”å¦‚æŸä¸ª node æœåŠ¡çªç„¶å¼‚å¸¸é‡å¯äº†ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ pm2 æä¾›çš„æ—¥å¿—å·¥å…·æ¥æŸ¥çœ‹å®æ—¶æ—¥å¿—ï¼Œçœ‹æ˜¯ä¸æ˜¯è„šæœ¬å‡ºé”™ä¹‹ç±»å¯¼è‡´çš„å¼‚å¸¸é‡å¯ã€‚</p> <div class="language-undefined line-numbers-mode"><pre class="language-text"><code>pm2 logs
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="æŒ‡ä»¤-tab-è¡¥å…¨"><a href="#æŒ‡ä»¤-tab-è¡¥å…¨" class="header-anchor">#</a> æŒ‡ä»¤ tab è¡¥å…¨</h2> <p>è¿è¡Œ<code>pm2 --help</code>ï¼Œå¯ä»¥çœ‹åˆ°<code>pm2</code>æ”¯æŒçš„å­å‘½ä»¤è¿˜æ˜¯è›®å¤šçš„ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œè‡ªåŠ¨å®Œæˆçš„åŠŸèƒ½å°±å¾ˆé‡è¦äº†ã€‚</p> <p>è¿è¡Œå¦‚ä¸‹å‘½ä»¤ã€‚æ­å–œï¼Œå·²ç»èƒ½å¤Ÿé€šè¿‡ tab è‡ªåŠ¨è¡¥å…¨äº†ã€‚ç»†èŠ‚å¯å‚è€ƒ<a href="https://links.jianshu.com/go?to=http%3A%2F%2Fpm2.keymetrics.io%2Fdocs%2Fusage%2Fauto-completion%2F" target="_blank" rel="noopener noreferrer">è¿™é‡Œ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>pm2 completion <span class="token function">install</span>
<span class="token builtin class-name">source</span> ~/.bash_profile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="å¼€æœºè‡ªåŠ¨å¯åŠ¨"><a href="#å¼€æœºè‡ªåŠ¨å¯åŠ¨" class="header-anchor">#</a> å¼€æœºè‡ªåŠ¨å¯åŠ¨</h2> <p>å¯ä»¥é€šè¿‡<code>pm2 startup</code>æ¥å®ç°å¼€æœºè‡ªå¯åŠ¨ã€‚ç»†èŠ‚å¯<a href="https://links.jianshu.com/go?to=http%3A%2F%2Fpm2.keymetrics.io%2Fdocs%2Fusage%2Fstartup%2F" target="_blank" rel="noopener noreferrer">å‚è€ƒ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚å¤§è‡´æµç¨‹å¦‚ä¸‹</p> <ol><li>é€šè¿‡<code>pm2 save</code>ä¿å­˜å½“å‰è¿›ç¨‹çŠ¶æ€ã€‚</li> <li>é€šè¿‡<code>pm2 startup [platform]</code>ç”Ÿæˆå¼€æœºè‡ªå¯åŠ¨çš„å‘½ä»¤ã€‚ï¼ˆè®°å¾—æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºï¼‰</li> <li>å°†æ­¥éª¤ 2 ç”Ÿæˆçš„å‘½ä»¤ï¼Œç²˜è´´åˆ°æ§åˆ¶å°è¿›è¡Œï¼Œæå®šã€‚</li></ol> <h2 id="ä¼ å…¥-node-args"><a href="#ä¼ å…¥-node-args" class="header-anchor">#</a> ä¼ å…¥ node args</h2> <p>ç›´æ¥ä¸Šä¾‹å­ï¼Œåˆ†åˆ«æ˜¯é€šè¿‡å‘½ä»¤è¡Œå’Œé…ç½®æ–‡ä»¶ã€‚</p> <p>å‘½ä»¤è¡Œï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>pm2 start app.js --node-args<span class="token operator">=</span><span class="token string">&quot;--harmony&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>é…ç½®æ–‡ä»¶ï¼š</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;oc-server&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token string">&quot;app.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;node_args&quot;</span><span class="token operator">:</span> <span class="token string">&quot;--harmony&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="å®ä¾‹è¯´æ˜"><a href="#å®ä¾‹è¯´æ˜" class="header-anchor">#</a> å®ä¾‹è¯´æ˜</h3> <p>å‡è®¾æ˜¯åœ¨<code>centos</code>ä¸‹ï¼Œé‚£ä¹ˆè¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œæå®šã€‚å¼ºçƒˆå»ºè®®è¿è¡Œå®Œæˆä¹‹åï¼Œé‡å¯æœºå™¨ï¼Œçœ‹æ˜¯å¦è®¾ç½®æˆåŠŸã€‚</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token punctuation">[</span>root<span class="token class-name">@iZ94wb7tioqZ</span> option_analysis<span class="token punctuation">]</span># pm2 save
<span class="token punctuation">[</span>root<span class="token class-name">@iZ94wb7tioqZ</span> option_analysis<span class="token punctuation">]</span># pm2 startup centos
<span class="token punctuation">[</span>PM2<span class="token punctuation">]</span> Generating system <span class="token class-name">init</span> script <span class="token keyword">in</span> <span class="token operator">/</span>etc<span class="token operator">/</span>init<span class="token punctuation">.</span>d<span class="token operator">/</span>pm2<span class="token operator">-</span>init<span class="token punctuation">.</span>sh
<span class="token punctuation">[</span>PM2<span class="token punctuation">]</span> Making script booting at startup<span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">PM2</span></span><span class="token punctuation">]</span> <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span><span class="token keyword">lock</span><span class="token operator">/</span>subsys<span class="token operator">/</span>pm2<span class="token operator">-</span>init<span class="token punctuation">.</span>sh lockfile has been added
<span class="token punctuation">[</span>PM2<span class="token punctuation">]</span> <span class="token operator">-</span>centos<span class="token operator">-</span> Using <span class="token class-name">the</span> command<span class="token punctuation">:</span>
      su <span class="token operator">-</span>c <span class="token string">&quot;chmod +x /etc/init.d/pm2-init.sh; chkconfig --add pm2-init.sh&quot;</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">PM2</span></span><span class="token punctuation">]</span> Done<span class="token punctuation">.</span>
<span class="token punctuation">[</span>root<span class="token class-name">@iZ94wb7tioqZ</span> option_analysis<span class="token punctuation">]</span># pm2 save
<span class="token punctuation">[</span>PM2<span class="token punctuation">]</span> Dumping processes
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="ç›‘æ§-monitor"><a href="#ç›‘æ§-monitor" class="header-anchor">#</a> ç›‘æ§(monitor)</h2> <p>è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼ŒæŸ¥çœ‹å½“å‰é€šè¿‡ pm2 è¿è¡Œçš„è¿›ç¨‹çš„çŠ¶æ€ã€‚</p> <div class="language-undefined line-numbers-mode"><pre class="language-text"><code>pm2 monit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>çœ‹åˆ°ç±»ä¼¼è¾“å‡º</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token punctuation">[</span><span class="token label symbol">root@</span>oneday<span class="token operator">-</span>dev0 server<span class="token punctuation">]</span># pm2 monit
âŒ¬ PM2 <span class="token function">monitoring</span> <span class="token punctuation">(</span>To go further check <span class="token keyword">out</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>app<span class="token punctuation">.</span>keymetrics<span class="token punctuation">.</span>io<span class="token punctuation">)</span>
                                       <span class="token punctuation">[</span>                              <span class="token punctuation">]</span> <span class="token number">0</span> <span class="token operator">%</span>
âŒ¬ PM2 <span class="token function">monitoring</span> <span class="token punctuation">(</span>To go further check o<span class="token punctuation">[</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span>|               <span class="token punctuation">]</span> <span class="token number">196.285</span> MB

 â— fis<span class="token operator">-</span>receiver                        <span class="token punctuation">[</span>                              <span class="token punctuation">]</span> <span class="token number">0</span> <span class="token operator">%</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>fork_mode<span class="token punctuation">]</span>                        <span class="token punctuation">[</span><span class="token operator">||</span><span class="token operator">||</span>|                         <span class="token punctuation">]</span> <span class="token number">65.773</span> MB

 â— www                                 <span class="token punctuation">[</span>                              <span class="token punctuation">]</span> <span class="token number">0</span> <span class="token operator">%</span>
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>fork_mode<span class="token punctuation">]</span>                        <span class="token punctuation">[</span><span class="token operator">||</span><span class="token operator">||</span>|                         <span class="token punctuation">]</span> <span class="token number">74.426</span> MB

 â— oc<span class="token operator">-</span>server                           <span class="token punctuation">[</span>                              <span class="token punctuation">]</span> <span class="token number">0</span> <span class="token operator">%</span>
<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>fork_mode<span class="token punctuation">]</span>                        <span class="token punctuation">[</span><span class="token operator">||</span><span class="token operator">||</span>                          <span class="token punctuation">]</span> <span class="token number">57.801</span> MB

 â— pm2<span class="token operator">-</span>http<span class="token operator">-</span><span class="token keyword">interface</span>                  <span class="token punctuation">[</span>                              <span class="token punctuation">]</span> stopped
<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>fork_mode<span class="token punctuation">]</span>                        <span class="token punctuation">[</span>                              <span class="token punctuation">]</span> <span class="token number">0</span> B

 â— start<span class="token operator">-</span>production
<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>fork_mode<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="å†…å­˜ä½¿ç”¨è¶…è¿‡ä¸Šé™è‡ªåŠ¨é‡å¯"><a href="#å†…å­˜ä½¿ç”¨è¶…è¿‡ä¸Šé™è‡ªåŠ¨é‡å¯" class="header-anchor">#</a> å†…å­˜ä½¿ç”¨è¶…è¿‡ä¸Šé™è‡ªåŠ¨é‡å¯</h2> <p>å¦‚æœæƒ³è¦ä½ çš„åº”ç”¨ï¼Œåœ¨è¶…è¿‡ä½¿ç”¨å†…å­˜ä¸Šé™åè‡ªåŠ¨é‡å¯ï¼Œé‚£ä¹ˆå¯ä»¥åŠ ä¸Š<code>--max-memory-restart</code>å‚æ•°ã€‚ï¼ˆæœ‰å¯¹åº”çš„é…ç½®é¡¹ï¼‰</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>pm2 start big<span class="token operator">-</span>array<span class="token punctuation">.</span>js <span class="token operator">--</span>max<span class="token operator">-</span>memory<span class="token operator">-</span>restart <span class="token number">20</span>M
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="å¸¸ç”¨å‘½ä»¤ä¸€è§ˆ"><a href="#å¸¸ç”¨å‘½ä»¤ä¸€è§ˆ" class="header-anchor">#</a> å¸¸ç”¨å‘½ä»¤ä¸€è§ˆ</h3> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code><span class="token comment"># æ™®é€š General</span>
$ npm install pm2 <span class="token operator">-</span>g            <span class="token comment"># å®‰è£… PM2</span>
$ pm2 start app<span class="token punctuation">.</span>js              <span class="token comment"># å¯åŠ¨ï¼Œå®ˆæŠ¤è¿›ç¨‹ï¼Œè‡ªåŠ¨é‡å¯åº”ç”¨ç¨‹åº Start, Daemonize and auto-restart application (Node)</span>
$ pm2 start app<span class="token punctuation">.</span>py              <span class="token comment"># å¯åŠ¨ï¼Œå®ˆæŠ¤è¿›ç¨‹ï¼Œè‡ªåŠ¨é‡å¯pythonåº”ç”¨ç¨‹åº Start, Daemonize and auto-restart application (Python)</span>
$ pm2 start npm <span class="token operator">-</span><span class="token operator">-</span> start        <span class="token comment"># å¯åŠ¨ï¼Œå®ˆæŠ¤è¿›ç¨‹ï¼Œè‡ªåŠ¨é‡å¯nodeåº”ç”¨ç¨‹åº Start, Daemonize and auto-restart Node application</span>

<span class="token comment"># é›†ç¾¤æ¨¡å¼ (åªæ”¯æŒnodeè¿›ç¨‹) Cluster Mode (Node.js only)</span>
$ pm2 start app<span class="token punctuation">.</span>js <span class="token operator">-</span>i <span class="token number">4</span>         <span class="token comment"># åœ¨é›†ç¾¤æ¨¡å¼ä¸‹ï¼Œå¯åŠ¨4ä¸ªåº”ç”¨ç¨‹åºå®ä¾‹  Start 4 instances of application in cluster mode</span>
                                <span class="token comment"># åŒæ—¶ï¼Œå°†ç½‘ç»œè¯·æ±‚ï¼Œè´Ÿè½½å‡è¡¡åˆ°æ¯ä¸ªåº”ç”¨å®ä¾‹  it will load balance network queries to each app</span>
$ pm2 reload all                <span class="token comment"># 0ç§’é‡å¯æ‰€æœ‰åº”ç”¨ Zero Second Downtime Reload</span>
$ pm2 scale <span class="token punctuation">[</span>app<span class="token operator">-</span>name<span class="token punctuation">]</span> <span class="token number">10</span>       <span class="token comment"># å°†åº”ç”¨è¿›ç¨‹è°ƒæ•´åˆ°10 Scale Cluster app to 10 process</span>

<span class="token comment"># è¿›ç¨‹ç›‘æ§ Scale Cluster app to 10 process</span>
$ pm2 list                      <span class="token comment"># åˆ—å‡ºæ‰€æœ‰ç”¨PM2å¯åŠ¨çš„è¿›ç¨‹ List all processes started with PM2</span>
$ pm2 monit                     <span class="token comment"># æ˜¾ç¤ºæ¯ä¸ªåº”ç”¨å ç”¨çš„cpuå’Œå†…å­˜ Display memory and cpu usage of each app</span>
$ pm2 show <span class="token punctuation">[</span>app<span class="token operator">-</span>name<span class="token punctuation">]</span>           <span class="token comment"># æ˜¾ç¤ºæŸä¸ªè¿›ç¨‹çš„æ‰€æœ‰ä¿¡æ¯ Show all informations about application</span>

<span class="token comment"># æ—¥å¿—ç®¡ç† Log management</span>
$ pm2 logs                      <span class="token comment"># æ˜¾ç¤ºæ‰€æœ‰åº”ç”¨çš„æ—¥å¿—  Display logs of all apps</span>
$ pm2 logs <span class="token punctuation">[</span>app<span class="token operator">-</span>name<span class="token punctuation">]</span>           <span class="token comment"># æ˜¾ç¤ºæŸä¸ªåº”ç”¨çš„æ—¥å¿— Display logs for a specific app</span>
$ pm2 logs <span class="token operator">-</span><span class="token operator">-</span>json               <span class="token comment"># jsonåŒ–æ—¥å¿— Logs in JSON format</span>
$ pm2 flush
$ pm2 reloadLogs

<span class="token comment"># è¿›ç¨‹çŠ¶æ€ç®¡ç† Process State Management</span>
$ pm2 start app<span class="token punctuation">.</span>js <span class="token operator">-</span><span class="token operator">-</span>name<span class="token operator">=</span><span class="token string-literal"><span class="token string">&quot;api&quot;</span></span> <span class="token comment"># å¯åŠ¨ä¸€ä¸ªåº”ç”¨å¹¶å‘½åä¸ºapiã€‚ Start application and name it &quot;api&quot;</span>
$ pm2 start app<span class="token punctuation">.</span>js <span class="token operator">-</span><span class="token operator">-</span> <span class="token operator">-</span>a <span class="token number">34</span>     <span class="token comment"># å¯åŠ¨ä¸€ä¸ªåº”ç”¨ï¼Œå¹¶ä¼ é€’â€œ-a 34â€çš„å‚æ•°ã€‚ Start app and pass option &quot;-a 34&quot; as argument</span>
$ pm2 start app<span class="token punctuation">.</span>js <span class="token operator">-</span><span class="token operator">-</span>watch      <span class="token comment"># é‡å¯ä¸€ä¸ªåº”ç”¨ï¼Œå½“æ–‡ä»¶æ”¹å˜çš„æ—¶å€™ã€‚Restart application on file change</span>
$ pm2 start script<span class="token punctuation">.</span>sh           <span class="token comment"># å¯åŠ¨ä¸€ä¸ªbashè„šæœ¬ã€‚Start bash script</span>
$ pm2 start app<span class="token punctuation">.</span>json            <span class="token comment"># å¯åŠ¨åœ¨app.jsonä¸­å£°æ˜çš„æ‰€æœ‰åº”ç”¨ã€‚Start all applications declared in app.json</span>
$ pm2 reset <span class="token punctuation">[</span>app<span class="token operator">-</span>name<span class="token punctuation">]</span>          <span class="token comment"># é‡ç½®æ‰€æœ‰è®¡æ•°å™¨ã€‚Reset all counters</span>
$ pm2 stop all                  <span class="token comment"># åœæ­¢æ‰€æœ‰åº”ç”¨ã€‚Stop all apps</span>
$ pm2 stop <span class="token number">0</span>                    <span class="token comment"># åœæ­¢id ä¸º0çš„åº”ç”¨ã€‚Stop process with id 0</span>
$ pm2 restart all               <span class="token comment"># é‡å¯æ‰€æœ‰åº”ç”¨ã€‚Restart all apps</span>
$ pm2 gracefulReload all        <span class="token comment"># åœ¨é›†ç¾¤æ¨¡å¼ä¸‹ï¼Œå¹³ç¨³çš„é‡åŠ è½½æ‰€æœ‰åº”ç”¨ã€‚Graceful reload all apps in cluster mode</span>
$ pm2 delete all                <span class="token comment"># æ€æ‰æ‰€æœ‰åº”ç”¨ã€‚Kill and delete all apps</span>
$ pm2 delete <span class="token number">0</span>                  <span class="token comment"># æ€æ‰idä¸º0çš„è¿›ç¨‹ã€‚Delete app with id 0</span>

<span class="token comment"># å¯åŠ¨ï¼å¼•å¯¼ç®¡ç† Startup/Boot management</span>
$ pm2 startup                   <span class="token comment"># æ£€æµ‹initç³»ç»Ÿï¼Œåœ¨å¯åŠ¨æ—¶ç”Ÿæˆå’Œé…ç½®pm2ã€‚Detect init system, generate and configure pm2 boot on startup</span>
$ pm2 save                      <span class="token comment"># ä¿å­˜å½“å‰è¿›ç¨‹åˆ—è¡¨ã€‚Save current process list</span>
$ pm2 resurrect                 <span class="token comment"># æ¢å¤ä»¥å‰ä¿å­˜çš„è¿›ç¨‹ã€‚Restore previously save processes</span>
$ pm2 unstartup                 <span class="token comment"># åœç”¨å’Œåˆ é™¤å¯åŠ¨ç³»ç»Ÿã€‚Disable and remove startup system</span>
$ pm2 update                    <span class="token comment"># ä¿å­˜è¿›ç¨‹ï¼Œç»ˆæ­¢PM2å¹¶æ¢å¤è¿›ç¨‹ã€‚Save processes, kill PM2 and restore processes</span>
$ pm2 generate                  <span class="token comment"># ç”Ÿæˆæ ·æœ¬jsoné…ç½®æ–‡ä»¶ã€‚Generate a sample json configuration file</span>

<span class="token comment"># éƒ¨ç½² Deployment</span>
$ pm2 deploy app<span class="token punctuation">.</span>json prod setup    <span class="token comment"># è®¾ç½®â€œç”Ÿäº§ç¯å¢ƒâ€è¿œç¨‹æœåŠ¡å™¨ã€‚ Setup &quot;prod&quot; remote server</span>
$ pm2 deploy app<span class="token punctuation">.</span>json prod          <span class="token comment"># æ›´æ–°â€œç”Ÿäº§ç¯å¢ƒâ€è¿œç¨‹æœåŠ¡å™¨ã€‚ Update &quot;prod&quot; remote server</span>
$ pm2 deploy app<span class="token punctuation">.</span>json prod revert <span class="token number">2</span> <span class="token comment"># å°†â€œç”Ÿäº§ç¯å¢ƒâ€è¿œç¨‹æœåŠ¡å™¨æ¢å¤2ã€‚Revert &quot;prod&quot; remote server by 2</span>

<span class="token comment"># æ¨¡å—ç³»ç»Ÿ Module system</span>
$ pm2 <span class="token keyword">module</span><span class="token symbol">:generate</span> <span class="token punctuation">[</span>name<span class="token punctuation">]</span>    <span class="token comment"># ç”Ÿæˆåç§°ä¸º[name]çš„ç¤ºä¾‹æ¨¡å—ã€‚Generate sample module with name [name]</span>
$ pm2 install pm2<span class="token operator">-</span>logrotate     <span class="token comment"># å®‰è£…æ¨¡å—ï¼ˆè¿™é‡Œæ˜¯æ—¥å¿—å¾ªç¯ç³»ç»Ÿï¼‰ã€‚Install module (here a log rotation system)</span>
$ pm2 uninstall pm2<span class="token operator">-</span>logrotate   <span class="token comment"># å¸è½½æ¨¡å—ã€‚Uninstall module</span>
$ pm2 publish                   <span class="token comment"># å¢é‡ç‰ˆæœ¬ï¼Œgit pushå’Œnpmå‘å¸ƒã€‚Increment version, git push and npm publish</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><h3 id="è¿›ç¨‹ç®¡ç†"><a href="#è¿›ç¨‹ç®¡ç†" class="header-anchor">#</a> è¿›ç¨‹ç®¡ç†</h3> <p>åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åº</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>$ pm2 list
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å¾ˆç®€å•çš„ç®¡ç†ä½ çš„åº”ç”¨è¿›ç¨‹</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>$ pm2 stop     <span class="token operator">&lt;</span>app_name<span class="token operator">|</span>id<span class="token operator">|</span><span class="token string-literal"><span class="token string">'all'</span></span><span class="token operator">|</span>json_conf<span class="token operator">&gt;</span>
$ pm2 restart  <span class="token operator">&lt;</span>app_name<span class="token operator">|</span>id<span class="token operator">|</span><span class="token string-literal"><span class="token string">'all'</span></span><span class="token operator">|</span>json_conf<span class="token operator">&gt;</span>
$ pm2 delete   <span class="token operator">&lt;</span>app_name<span class="token operator">|</span>id<span class="token operator">|</span><span class="token string-literal"><span class="token string">'all'</span></span><span class="token operator">|</span>json_conf<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="cpu-è¿›ç¨‹ç›‘æ§"><a href="#cpu-è¿›ç¨‹ç›‘æ§" class="header-anchor">#</a> CPU/è¿›ç¨‹ç›‘æ§</h3> <p>ç›‘æ§æ‰€æœ‰å¯åŠ¨çš„è¿›ç¨‹ï¼š</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>$ pm2 monit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="æ—¥å¿—è®¾æ–½"><a href="#æ—¥å¿—è®¾æ–½" class="header-anchor">#</a> æ—¥å¿—è®¾æ–½</h3> <p>å®æ—¶æ˜¾ç¤ºæŒ‡å®šè¿›ç¨‹æˆ–æ‰€æœ‰è¿›ç¨‹çš„æ—¥å¿—ã€‚æä¾›æ ‡å‡†ï¼ŒåŸå§‹ï¼ŒJSON å’Œæ ¼å¼è¾“å‡ºã€‚</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>$ pm2 logs <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'all'</span></span><span class="token operator">|</span>app_name<span class="token operator">|</span>app_id<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">-</span>json<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">-</span>format<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">-</span>raw<span class="token punctuation">]</span>`
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ä¾‹å­:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>$ pm2 logs <span class="token constant">APP</span><span class="token operator">-</span><span class="token constant">NAME</span>       <span class="token comment"># Display APP-NAME logs</span>
$ pm2 logs <span class="token operator">-</span><span class="token operator">-</span>json         <span class="token comment"># JSON output</span>
$ pm2 logs <span class="token operator">-</span><span class="token operator">-</span>format       <span class="token comment"># Formated output</span>

$ pm2 flush               <span class="token comment"># Flush all logs</span>
$ pm2 reloadLogs          <span class="token comment"># Reload all logs</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="ç”Ÿæˆå¯åŠ¨è„šæœ¬"><a href="#ç”Ÿæˆå¯åŠ¨è„šæœ¬" class="header-anchor">#</a> ç”Ÿæˆå¯åŠ¨è„šæœ¬</h3> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">/* PM2å¯ä»¥ç”Ÿæˆå’Œé…ç½®å¯åŠ¨è„šæœ¬ï¼Œä»¥åœ¨æ¯æ¬¡æœåŠ¡å™¨é‡æ–°å¯åŠ¨æ—¶ä¿æŒPM2å’Œæ‚¨çš„è¿›ç¨‹æ´»åŠ¨ã€‚
æ”¯æŒinitç³»ç»Ÿï¼Œå¦‚ï¼šsystemdï¼ˆUbuntu 16ï¼ŒCentOSï¼ŒArchï¼‰ï¼Œupstartï¼ˆUbuntu 14/12ï¼‰ï¼Œlaunchdï¼ˆMacOSxï¼ŒDarwinï¼‰ï¼Œrc.dï¼ˆFreeBSDï¼‰ã€‚
è‡ªåŠ¨æ£€æµ‹initç³»ç»Ÿ+åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶ç”Ÿæˆå’Œè®¾ç½®PM2å¼•å¯¼ã€‚ Auto detect init system + generate and setup PM2 boot at server startup */</span>
$ pm2 startup

<span class="token comment"># æ‰‹åŠ¨æŒ‡å®šå¯åŠ¨ç³»ç»Ÿ. Manually specify the startup system</span>
<span class="token comment"># å¯ä»¥æ˜¯ï¼šsystemdï¼Œupstartï¼Œlaunchdï¼Œrcdã€‚</span>
$ pm2 startup <span class="token punctuation">[</span>platform<span class="token punctuation">]</span>

<span class="token comment"># åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶ç¦ç”¨å’Œåˆ é™¤PM2å¼•å¯¼ã€‚Disable and remove PM2 boot at server startup</span>
$ pm2 unstartup
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>åœ¨é‡æ–°å¯åŠ¨æ—¶ä¿å­˜/å†»ç»“è¿›ç¨‹åˆ—è¡¨ï¼š</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>$ pm2 save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="æ¨¡å—ç³»ç»Ÿ-module-system"><a href="#æ¨¡å—ç³»ç»Ÿ-module-system" class="header-anchor">#</a> æ¨¡å—ç³»ç»Ÿ Module system</h2> <p>PM2 åµŒå…¥äº†ä¸€ä¸ªç®€å•è€Œå¼ºå¤§çš„æ¨¡å—ç³»ç»Ÿã€‚å®‰è£…æ¨¡å—å¾ˆç®€å•ï¼š</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>$ pm2 install <span class="token operator">&lt;</span>module_name<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2024/08/21, 14:10:51</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/wwblog/pages/4fff19/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Mysql</div></a> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/wwblog/pages/4fff19/" class="prev">Mysql</a></span> <!----></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="https://github.com/MX-lbw" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://www.jianshu.com/u/b5796d21ef29" title="jianshu" target="_blank" class="iconfont icon-jianshu"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a> 
    | Copyright Â© 2023-2024
    <span>Wu wei | MIT License</span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><!----><div></div><!----></div></div>
    <script src="/wwblog/assets/js/app.0e0201b5.js" defer></script><script src="/wwblog/assets/js/3.e40f20a1.js" defer></script><script src="/wwblog/assets/js/1.6112db0e.js" defer></script><script src="/wwblog/assets/js/115.2eabd80f.js" defer></script><script src="/wwblog/assets/js/25.f1c8b165.js" defer></script><script src="/wwblog/assets/js/26.8d4e2030.js" defer></script>
  </body>
</html>
