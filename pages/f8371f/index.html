<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue3 | ç¢Œç¢Œæ— ä¸º ğŸª‚ çŸ¥è¯†æ•´ç†</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/wwblog/img/favicon.ico">
    <link rel="stylesheet" href="/wwblog/iconfont/iconfont.css">
    <meta name="description" content="">
    <meta name="keywords" content="">
    
    <link rel="preload" href="/wwblog/assets/css/0.styles.6d915053.css" as="style"><link rel="preload" href="/wwblog/assets/js/app.0e0201b5.js" as="script"><link rel="preload" href="/wwblog/assets/js/3.e40f20a1.js" as="script"><link rel="preload" href="/wwblog/assets/js/1.6112db0e.js" as="script"><link rel="preload" href="/wwblog/assets/js/21.f7274164.js" as="script"><link rel="preload" href="/wwblog/assets/js/25.f1c8b165.js" as="script"><link rel="preload" href="/wwblog/assets/js/26.8d4e2030.js" as="script"><link rel="prefetch" href="/wwblog/assets/js/10.ead2052c.js"><link rel="prefetch" href="/wwblog/assets/js/100.8ebd083d.js"><link rel="prefetch" href="/wwblog/assets/js/101.1512be69.js"><link rel="prefetch" href="/wwblog/assets/js/102.1dd604e8.js"><link rel="prefetch" href="/wwblog/assets/js/103.0d2cafa6.js"><link rel="prefetch" href="/wwblog/assets/js/104.2fbbcdf2.js"><link rel="prefetch" href="/wwblog/assets/js/105.034503b5.js"><link rel="prefetch" href="/wwblog/assets/js/106.2377d717.js"><link rel="prefetch" href="/wwblog/assets/js/107.da24425a.js"><link rel="prefetch" href="/wwblog/assets/js/108.8f7a5a17.js"><link rel="prefetch" href="/wwblog/assets/js/109.dac394c5.js"><link rel="prefetch" href="/wwblog/assets/js/11.d6c70d56.js"><link rel="prefetch" href="/wwblog/assets/js/110.f3cc7f27.js"><link rel="prefetch" href="/wwblog/assets/js/111.1c9d4e37.js"><link rel="prefetch" href="/wwblog/assets/js/112.b55d2ee3.js"><link rel="prefetch" href="/wwblog/assets/js/113.bd64cbc8.js"><link rel="prefetch" href="/wwblog/assets/js/114.4e0db573.js"><link rel="prefetch" href="/wwblog/assets/js/115.2eabd80f.js"><link rel="prefetch" href="/wwblog/assets/js/116.c5fc07ab.js"><link rel="prefetch" href="/wwblog/assets/js/117.90ec6696.js"><link rel="prefetch" href="/wwblog/assets/js/118.0c9946b3.js"><link rel="prefetch" href="/wwblog/assets/js/119.8c93fe06.js"><link rel="prefetch" href="/wwblog/assets/js/12.03a87e33.js"><link rel="prefetch" href="/wwblog/assets/js/120.3488c313.js"><link rel="prefetch" href="/wwblog/assets/js/121.2ed19331.js"><link rel="prefetch" href="/wwblog/assets/js/122.6cf48a1b.js"><link rel="prefetch" href="/wwblog/assets/js/13.46bc3555.js"><link rel="prefetch" href="/wwblog/assets/js/14.2f0bfdcc.js"><link rel="prefetch" href="/wwblog/assets/js/15.4c613dd6.js"><link rel="prefetch" href="/wwblog/assets/js/16.cc9bbedd.js"><link rel="prefetch" href="/wwblog/assets/js/17.280dccef.js"><link rel="prefetch" href="/wwblog/assets/js/18.17de33cf.js"><link rel="prefetch" href="/wwblog/assets/js/19.da0ee97f.js"><link rel="prefetch" href="/wwblog/assets/js/2.ab0c2f02.js"><link rel="prefetch" href="/wwblog/assets/js/20.52f2efe6.js"><link rel="prefetch" href="/wwblog/assets/js/22.2ebcf1dc.js"><link rel="prefetch" href="/wwblog/assets/js/23.6815f8f2.js"><link rel="prefetch" href="/wwblog/assets/js/24.8a643cd0.js"><link rel="prefetch" href="/wwblog/assets/js/27.6883885e.js"><link rel="prefetch" href="/wwblog/assets/js/28.ddf9f934.js"><link rel="prefetch" href="/wwblog/assets/js/29.7322cfb8.js"><link rel="prefetch" href="/wwblog/assets/js/30.c5a1f2f8.js"><link rel="prefetch" href="/wwblog/assets/js/31.1702585e.js"><link rel="prefetch" href="/wwblog/assets/js/32.40241365.js"><link rel="prefetch" href="/wwblog/assets/js/33.8687ea63.js"><link rel="prefetch" href="/wwblog/assets/js/34.be20e881.js"><link rel="prefetch" href="/wwblog/assets/js/35.3e12cae0.js"><link rel="prefetch" href="/wwblog/assets/js/36.8852432d.js"><link rel="prefetch" href="/wwblog/assets/js/37.ea27a75a.js"><link rel="prefetch" href="/wwblog/assets/js/38.92b6828e.js"><link rel="prefetch" href="/wwblog/assets/js/39.78416700.js"><link rel="prefetch" href="/wwblog/assets/js/4.1fce4caa.js"><link rel="prefetch" href="/wwblog/assets/js/40.77a5df24.js"><link rel="prefetch" href="/wwblog/assets/js/41.891302ed.js"><link rel="prefetch" href="/wwblog/assets/js/42.cffd47b0.js"><link rel="prefetch" href="/wwblog/assets/js/43.146bf699.js"><link rel="prefetch" href="/wwblog/assets/js/44.e58b6960.js"><link rel="prefetch" href="/wwblog/assets/js/45.95dd3f6b.js"><link rel="prefetch" href="/wwblog/assets/js/46.ed3b9bab.js"><link rel="prefetch" href="/wwblog/assets/js/47.8799af3d.js"><link rel="prefetch" href="/wwblog/assets/js/48.ce6360bb.js"><link rel="prefetch" href="/wwblog/assets/js/49.5cadd6d1.js"><link rel="prefetch" href="/wwblog/assets/js/5.05f748ed.js"><link rel="prefetch" href="/wwblog/assets/js/50.a73e32f0.js"><link rel="prefetch" href="/wwblog/assets/js/51.7b6e4320.js"><link rel="prefetch" href="/wwblog/assets/js/52.7ae7c224.js"><link rel="prefetch" href="/wwblog/assets/js/53.aa62c86c.js"><link rel="prefetch" href="/wwblog/assets/js/54.84af44c7.js"><link rel="prefetch" href="/wwblog/assets/js/55.d06e043f.js"><link rel="prefetch" href="/wwblog/assets/js/56.ad75a58a.js"><link rel="prefetch" href="/wwblog/assets/js/57.6793b83d.js"><link rel="prefetch" href="/wwblog/assets/js/58.5ca646ac.js"><link rel="prefetch" href="/wwblog/assets/js/59.3e7735bc.js"><link rel="prefetch" href="/wwblog/assets/js/6.ececcadc.js"><link rel="prefetch" href="/wwblog/assets/js/60.f6b57a71.js"><link rel="prefetch" href="/wwblog/assets/js/61.0bc79206.js"><link rel="prefetch" href="/wwblog/assets/js/62.e9a8c735.js"><link rel="prefetch" href="/wwblog/assets/js/63.f57bd9f6.js"><link rel="prefetch" href="/wwblog/assets/js/64.d2ce549c.js"><link rel="prefetch" href="/wwblog/assets/js/65.e076c1d1.js"><link rel="prefetch" href="/wwblog/assets/js/66.1a736f60.js"><link rel="prefetch" href="/wwblog/assets/js/67.fe1bc553.js"><link rel="prefetch" href="/wwblog/assets/js/68.a218fa7b.js"><link rel="prefetch" href="/wwblog/assets/js/69.8c1eecc2.js"><link rel="prefetch" href="/wwblog/assets/js/7.7f333b20.js"><link rel="prefetch" href="/wwblog/assets/js/70.6d2d843c.js"><link rel="prefetch" href="/wwblog/assets/js/71.8c646a4e.js"><link rel="prefetch" href="/wwblog/assets/js/72.988bb703.js"><link rel="prefetch" href="/wwblog/assets/js/73.76e5cdeb.js"><link rel="prefetch" href="/wwblog/assets/js/74.ea7799ad.js"><link rel="prefetch" href="/wwblog/assets/js/75.4098c5e4.js"><link rel="prefetch" href="/wwblog/assets/js/76.5622a084.js"><link rel="prefetch" href="/wwblog/assets/js/77.73a7c5f9.js"><link rel="prefetch" href="/wwblog/assets/js/78.23a1d70a.js"><link rel="prefetch" href="/wwblog/assets/js/79.41179bb5.js"><link rel="prefetch" href="/wwblog/assets/js/80.39a49167.js"><link rel="prefetch" href="/wwblog/assets/js/81.9caefc31.js"><link rel="prefetch" href="/wwblog/assets/js/82.52a0fa2e.js"><link rel="prefetch" href="/wwblog/assets/js/83.74b297fd.js"><link rel="prefetch" href="/wwblog/assets/js/84.4553b153.js"><link rel="prefetch" href="/wwblog/assets/js/85.6ab6f74c.js"><link rel="prefetch" href="/wwblog/assets/js/86.0df5ee36.js"><link rel="prefetch" href="/wwblog/assets/js/87.8b329d5e.js"><link rel="prefetch" href="/wwblog/assets/js/88.cb074483.js"><link rel="prefetch" href="/wwblog/assets/js/89.292c5129.js"><link rel="prefetch" href="/wwblog/assets/js/90.9ef31f3a.js"><link rel="prefetch" href="/wwblog/assets/js/91.f9264fdb.js"><link rel="prefetch" href="/wwblog/assets/js/92.a2300a67.js"><link rel="prefetch" href="/wwblog/assets/js/93.95ac6166.js"><link rel="prefetch" href="/wwblog/assets/js/94.1fbab311.js"><link rel="prefetch" href="/wwblog/assets/js/95.3baa307a.js"><link rel="prefetch" href="/wwblog/assets/js/96.25650bf1.js"><link rel="prefetch" href="/wwblog/assets/js/97.0ee7e940.js"><link rel="prefetch" href="/wwblog/assets/js/98.4713ebb1.js"><link rel="prefetch" href="/wwblog/assets/js/99.cdeadc41.js"><link rel="prefetch" href="/wwblog/assets/js/vendors~docsearch.9fd01095.js">
    <link rel="stylesheet" href="/wwblog/assets/css/0.styles.6d915053.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wwblog/" class="home-link router-link-active"><img src="/wwblog/img/leftLogo.ico" alt="ç¢Œç¢Œæ— ä¸º ğŸª‚ çŸ¥è¯†æ•´ç†" class="logo"> <span class="site-name can-hide">ç¢Œç¢Œæ— ä¸º ğŸª‚ çŸ¥è¯†æ•´ç†</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/wwblog/" class="nav-link">ğŸ”¥ é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸš€ å‰ç«¯" class="dropdown-title"><a href="/wwblog/pages/73309c/" class="link-title">ğŸš€ å‰ç«¯</a> <span class="title" style="display:none;">ğŸš€ å‰ç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>åŸºç¡€</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wwblog/pages/73309c/" class="nav-link">Html</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/ed3de1/" class="nav-link">Css</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/738fa3/" class="nav-link">Less</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/227687/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/d0f169/" class="nav-link">TypeScript</a></li></ul></li><li class="dropdown-item"><h4>æ¡†æ¶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wwblog/pages/44307d/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/087eee/" class="nav-link">Pinia</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/b2b4ce/" class="nav-link">Vite</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/0f8172/" class="nav-link">Webpack</a></li></ul></li><li class="dropdown-item"><h4>å°ç¨‹åº</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wwblog/pages/56b587/" class="nav-link">åŸç”Ÿå°ç¨‹åº</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/dace69/" class="nav-link">Taroå¤šç«¯</a></li></ul></li><li class="dropdown-item"><h4>è·¨å¹³å°</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wwblog/pages/1c2e60/" class="nav-link">Electron ğŸ•³ï¸</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ“— Node" class="dropdown-title"><a href="/wwblog/pages/fa5d34/" class="link-title">ğŸ“— Node</a> <span class="title" style="display:none;">ğŸ“— Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wwblog/pages/fa5d34/" class="nav-link">ğŸ“– Koa</a></li><li class="dropdown-item"><!----> <a href="/wwblog/pages/3a1aae/" class="nav-link">ğŸ“– Express</a></li><li class="dropdown-item"><!----> <a href="/wwblog/pages/4fff19/" class="nav-link">ğŸ“– MySQL</a></li><li class="dropdown-item"><!----> <a href="/wwblog/pages/001c58/" class="nav-link">ğŸ“– Package</a></li></ul></div></div><div class="nav-item"><a href="/wwblog/pages/0a6cce/" class="nav-link">ğŸ“˜ Git</a></div><div class="nav-item"><a href="/wwblog/pages/5af5f1/" class="nav-link">ğŸ“’ é¢è¯•é¢˜</a></div><div class="nav-item"><a href="/wwblog/pages/900797/" class="nav-link">ğŸ“™ èµ„æºé“¾æ¥</a></div> <a href="https://github.com/MX-lbw/vuepressBlog" target="_blank" title="GitHub" rel="noopener noreferrer" class="repo-link"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-6163be0c><path d="M5.883 18.653c-.3-.2-.558-.455-.86-.816a50.32 50.32 0 0 1-.466-.579c-.463-.575-.755-.84-1.057-.949a1 1 0 0 1 .676-1.883c.752.27 1.261.735 1.947 1.588c-.094-.117.34.427.433.539c.19.227.33.365.44.438c.204.137.587.196 1.15.14c.023-.382.094-.753.202-1.095C5.38 15.31 3.7 13.396 3.7 9.64c0-1.24.37-2.356 1.058-3.292c-.218-.894-.185-1.975.302-3.192a1 1 0 0 1 .63-.582c.081-.024.127-.035.208-.047c.803-.123 1.937.17 3.415 1.096A11.731 11.731 0 0 1 12 3.315c.912 0 1.818.104 2.684.308c1.477-.933 2.613-1.226 3.422-1.096c.085.013.157.03.218.05a1 1 0 0 1 .616.58c.487 1.216.52 2.297.302 3.19c.691.936 1.058 2.045 1.058 3.293c0 3.757-1.674 5.665-4.642 6.392c.125.415.19.879.19 1.38a300.492 300.492 0 0 1-.012 2.716a1 1 0 0 1-.019 1.958c-1.139.228-1.983-.532-1.983-1.525l.002-.446l.005-.705c.005-.708.007-1.338.007-1.998c0-.697-.183-1.152-.425-1.36c-.661-.57-.326-1.655.54-1.752c2.967-.333 4.337-1.482 4.337-4.66c0-.955-.312-1.744-.913-2.404a1 1 0 0 1-.19-1.045c.166-.414.237-.957.096-1.614l-.01.003c-.491.139-1.11.44-1.858.949a1 1 0 0 1-.833.135A9.626 9.626 0 0 0 12 5.315c-.89 0-1.772.119-2.592.35a1 1 0 0 1-.83-.134c-.752-.507-1.374-.807-1.868-.947c-.144.653-.073 1.194.092 1.607a1 1 0 0 1-.189 1.045C6.016 7.89 5.7 8.694 5.7 9.64c0 3.172 1.371 4.328 4.322 4.66c.865.097 1.201 1.177.544 1.748c-.192.168-.429.732-.429 1.364v3.15c0 .986-.835 1.725-1.96 1.528a1 1 0 0 1-.04-1.962v-.99c-.91.061-1.662-.088-2.254-.485z" fill="currentColor"></path></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/wwblog/" class="nav-link">ğŸ”¥ é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸš€ å‰ç«¯" class="dropdown-title"><a href="/wwblog/pages/73309c/" class="link-title">ğŸš€ å‰ç«¯</a> <span class="title" style="display:none;">ğŸš€ å‰ç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>åŸºç¡€</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wwblog/pages/73309c/" class="nav-link">Html</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/ed3de1/" class="nav-link">Css</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/738fa3/" class="nav-link">Less</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/227687/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/d0f169/" class="nav-link">TypeScript</a></li></ul></li><li class="dropdown-item"><h4>æ¡†æ¶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wwblog/pages/44307d/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/087eee/" class="nav-link">Pinia</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/b2b4ce/" class="nav-link">Vite</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/0f8172/" class="nav-link">Webpack</a></li></ul></li><li class="dropdown-item"><h4>å°ç¨‹åº</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wwblog/pages/56b587/" class="nav-link">åŸç”Ÿå°ç¨‹åº</a></li><li class="dropdown-subitem"><a href="/wwblog/pages/dace69/" class="nav-link">Taroå¤šç«¯</a></li></ul></li><li class="dropdown-item"><h4>è·¨å¹³å°</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wwblog/pages/1c2e60/" class="nav-link">Electron ğŸ•³ï¸</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ“— Node" class="dropdown-title"><a href="/wwblog/pages/fa5d34/" class="link-title">ğŸ“— Node</a> <span class="title" style="display:none;">ğŸ“— Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wwblog/pages/fa5d34/" class="nav-link">ğŸ“– Koa</a></li><li class="dropdown-item"><!----> <a href="/wwblog/pages/3a1aae/" class="nav-link">ğŸ“– Express</a></li><li class="dropdown-item"><!----> <a href="/wwblog/pages/4fff19/" class="nav-link">ğŸ“– MySQL</a></li><li class="dropdown-item"><!----> <a href="/wwblog/pages/001c58/" class="nav-link">ğŸ“– Package</a></li></ul></div></div><div class="nav-item"><a href="/wwblog/pages/0a6cce/" class="nav-link">ğŸ“˜ Git</a></div><div class="nav-item"><a href="/wwblog/pages/5af5f1/" class="nav-link">ğŸ“’ é¢è¯•é¢˜</a></div><div class="nav-item"><a href="/wwblog/pages/900797/" class="nav-link">ğŸ“™ èµ„æºé“¾æ¥</a></div> <a href="https://github.com/MX-lbw/vuepressBlog" target="_blank" title="GitHub" rel="noopener noreferrer" class="repo-link"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-6163be0c><path d="M5.883 18.653c-.3-.2-.558-.455-.86-.816a50.32 50.32 0 0 1-.466-.579c-.463-.575-.755-.84-1.057-.949a1 1 0 0 1 .676-1.883c.752.27 1.261.735 1.947 1.588c-.094-.117.34.427.433.539c.19.227.33.365.44.438c.204.137.587.196 1.15.14c.023-.382.094-.753.202-1.095C5.38 15.31 3.7 13.396 3.7 9.64c0-1.24.37-2.356 1.058-3.292c-.218-.894-.185-1.975.302-3.192a1 1 0 0 1 .63-.582c.081-.024.127-.035.208-.047c.803-.123 1.937.17 3.415 1.096A11.731 11.731 0 0 1 12 3.315c.912 0 1.818.104 2.684.308c1.477-.933 2.613-1.226 3.422-1.096c.085.013.157.03.218.05a1 1 0 0 1 .616.58c.487 1.216.52 2.297.302 3.19c.691.936 1.058 2.045 1.058 3.293c0 3.757-1.674 5.665-4.642 6.392c.125.415.19.879.19 1.38a300.492 300.492 0 0 1-.012 2.716a1 1 0 0 1-.019 1.958c-1.139.228-1.983-.532-1.983-1.525l.002-.446l.005-.705c.005-.708.007-1.338.007-1.998c0-.697-.183-1.152-.425-1.36c-.661-.57-.326-1.655.54-1.752c2.967-.333 4.337-1.482 4.337-4.66c0-.955-.312-1.744-.913-2.404a1 1 0 0 1-.19-1.045c.166-.414.237-.957.096-1.614l-.01.003c-.491.139-1.11.44-1.858.949a1 1 0 0 1-.833.135A9.626 9.626 0 0 0 12 5.315c-.89 0-1.772.119-2.592.35a1 1 0 0 1-.83-.134c-.752-.507-1.374-.807-1.868-.947c-.144.653-.073 1.194.092 1.607a1 1 0 0 1-.189 1.045C6.016 7.89 5.7 8.694 5.7 9.64c0 3.172 1.371 4.328 4.322 4.66c.865.097 1.201 1.177.544 1.748c-.192.168-.429.732-.429 1.364v3.15c0 .986-.835 1.725-1.96 1.528a1 1 0 0 1-.04-1.962v-.99c-.91.061-1.662-.088-2.254-.485z" fill="currentColor"></path></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>HTML</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wwblog/pages/73309c/" class="sidebar-link">HTML5ç›¸å…³çŸ¥è¯† ğŸ« </a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Css</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wwblog/pages/ed3de1/" class="sidebar-link">CssçŸ¥è¯†æ€»ç»“</a></li><li><a href="/wwblog/pages/61de91/" class="sidebar-link">Flexå¼¹æ€§å¸ƒå±€</a></li><li><a href="/wwblog/pages/2d926b/" class="sidebar-link">Gridç½‘æ ¼å¸ƒå±€</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Less</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wwblog/pages/738fa3/" class="sidebar-link">Lesså­¦ä¹ </a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JavaScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>ECMAScript 6</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wwblog/pages/f344d070a1031ef7/" class="sidebar-link">ECMAScript 6 ç®€ä»‹</a></li><li><a href="/wwblog/pages/c1edd70a6b7c7872/" class="sidebar-link">let å’Œ const å‘½ä»¤</a></li><li><a href="/wwblog/pages/b1ab10a62f7564da/" class="sidebar-link">å˜é‡çš„è§£æ„èµ‹å€¼</a></li><li><a href="/wwblog/pages/ca89eca8adeba5f4/" class="sidebar-link">å­—ç¬¦ä¸²çš„æ‰©å±•</a></li><li><a href="/wwblog/pages/a650b4a0ebfc9350/" class="sidebar-link">å­—ç¬¦ä¸²çš„æ–°å¢æ–¹æ³•</a></li><li><a href="/wwblog/pages/0473261a6ab0ee8c/" class="sidebar-link">æ­£åˆ™çš„æ‰©å±•</a></li><li><a href="/wwblog/pages/5dfea9a0f2d1a392/" class="sidebar-link">æ•°å€¼çš„æ‰©å±•</a></li><li><a href="/wwblog/pages/8ed309d668b20264/" class="sidebar-link">å‡½æ•°çš„æ‰©å±•</a></li><li><a href="/wwblog/pages/e34009d60d8bc4b2/" class="sidebar-link">æ•°ç»„çš„æ‰©å±•</a></li><li><a href="/wwblog/pages/b5e3e0a0ff6e9c25/" class="sidebar-link">å¯¹è±¡çš„æ‰©å±•</a></li><li><a href="/wwblog/pages/e85e68947502cf90/" class="sidebar-link">å¯¹è±¡çš„æ–°å¢æ–¹æ³•</a></li><li><a href="/wwblog/pages/02c86eb2792f3262/" class="sidebar-link">Symbol</a></li><li><a href="/wwblog/pages/0c21dae358fca16b/" class="sidebar-link">Set å’Œ Map æ•°æ®ç»“æ„</a></li><li><a href="/wwblog/pages/f56ec2ab97d60483/" class="sidebar-link">Proxy</a></li><li><a href="/wwblog/pages/74de3e45e4491e95/" class="sidebar-link">Reflect</a></li><li><a href="/wwblog/pages/2810ae8985e9bd52/" class="sidebar-link">Promise å¯¹è±¡</a></li><li><a href="/wwblog/pages/48df907ad3570f3d/" class="sidebar-link">Iterator å’Œ for-of å¾ªç¯</a></li><li><a href="/wwblog/pages/718b48ed9ce0adce/" class="sidebar-link">Generator å‡½æ•°çš„è¯­æ³•</a></li><li><a href="/wwblog/pages/75af7031eb66847b/" class="sidebar-link">Generator å‡½æ•°çš„å¼‚æ­¥åº”ç”¨</a></li><li><a href="/wwblog/pages/3777253e65bac487/" class="sidebar-link">async å‡½æ•°</a></li><li><a href="/wwblog/pages/e831e1593c82bbe0/" class="sidebar-link">Class çš„åŸºæœ¬è¯­æ³•</a></li><li><a href="/wwblog/pages/83f8c3a0cd87dd83/" class="sidebar-link">Class çš„ç»§æ‰¿</a></li><li><a href="/wwblog/pages/efe2fb04eb8ac5fb/" class="sidebar-link">Module çš„è¯­æ³•</a></li><li><a href="/wwblog/pages/a79ca2e64ceae213/" class="sidebar-link">Module çš„åŠ è½½å®ç°</a></li><li><a href="/wwblog/pages/984bf549204bb266/" class="sidebar-link">ç¼–ç¨‹é£æ ¼</a></li><li><a href="/wwblog/pages/32c35f7651d6e58e/" class="sidebar-link">è¯»æ‡‚ ECMAScript è§„æ ¼</a></li><li><a href="/wwblog/pages/16121351be68691b/" class="sidebar-link">å¼‚æ­¥éå†å™¨</a></li><li><a href="/wwblog/pages/a2ba314746bfdbdd/" class="sidebar-link">ArrayBuffer</a></li><li><a href="/wwblog/pages/7188882b8d65af1b/" class="sidebar-link">æœ€æ–°ææ¡ˆ</a></li><li><a href="/wwblog/pages/e97bc1e5626b082c/" class="sidebar-link">è£…é¥°å™¨</a></li><li><a href="/wwblog/pages/1cf50330655efc69/" class="sidebar-link">å‡½æ•°å¼ç¼–ç¨‹</a></li><li><a href="/wwblog/pages/6a8e2dc558da1b39/" class="sidebar-link">Mixin</a></li><li><a href="/wwblog/pages/8e8f80f69b775a56/" class="sidebar-link">SIMD</a></li><li><a href="/wwblog/pages/ea6f3b870f6dab69/" class="sidebar-link">å‚è€ƒé“¾æ¥</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>JavaScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wwblog/pages/227687/" class="sidebar-link">Web Storage æµè§ˆå™¨æœ¬åœ°å­˜å‚¨</a></li><li><a href="/wwblog/pages/a254fc/" class="sidebar-link">Worker çº¿ç¨‹</a></li><li><a href="/wwblog/pages/4c23a3/" class="sidebar-link">JS æ¨¡å—åŒ–</a></li><li><a href="/wwblog/pages/1eb498/" class="sidebar-link">JSä¸Šä¸‹æ–‡(context)</a></li><li><a href="/wwblog/pages/82e3cd/" class="sidebar-link">BOMå¯¹è±¡</a></li><li><a href="/wwblog/pages/d76dee/" class="sidebar-link">DOMå¯¹è±¡</a></li><li><a href="/wwblog/pages/07a1c5/" class="sidebar-link">JSäº‹ä»¶</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>TypeScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wwblog/pages/d0f169/" class="sidebar-link">åŸºç¡€ç±»å‹</a></li><li><a href="/wwblog/pages/9f9223/" class="sidebar-link">å˜é‡å£°æ˜</a></li><li><a href="/wwblog/pages/fa7ce3/" class="sidebar-link">æ¥å£</a></li><li><a href="/wwblog/pages/53dc8b/" class="sidebar-link">ç±»</a></li><li><a href="/wwblog/pages/145b5a/" class="sidebar-link">å‡½æ•°</a></li><li><a href="/wwblog/pages/0bdb83/" class="sidebar-link">æ³›å‹</a></li><li><a href="/wwblog/pages/6ed3da/" class="sidebar-link">ç±»å‹æ¨æ–­</a></li><li><a href="/wwblog/pages/6c1189/" class="sidebar-link">é«˜çº§ç±»å‹</a></li><li><a href="/wwblog/pages/ac94b7/" class="sidebar-link">TypeScript</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wwblog/pages/44307d/" class="sidebar-link">vueæ ¸å¿ƒåŸºç¡€</a></li><li><a href="/wwblog/pages/b2ccb0/" class="sidebar-link">vueç»„ä»¶åŒ–å¼€å‘</a></li><li><a href="/wwblog/pages/fd5682/" class="sidebar-link">vueç»„ä»¶è¿›é˜¶</a></li><li><a href="/wwblog/pages/022102/" class="sidebar-link">vueè„šæ‰‹æ¶</a></li><li><a href="/wwblog/pages/413657/" class="sidebar-link">vueç½‘ç»œè¯·æ±‚</a></li><li><a href="/wwblog/pages/ea2bb5/" class="sidebar-link">Vue Router</a></li><li><a href="/wwblog/pages/f90af5/" class="sidebar-link">vuex</a></li><li><a href="/wwblog/pages/f8371f/" aria-current="page" class="active sidebar-link">vue3</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/wwblog/pages/f8371f/#vue3-çš„å˜åŒ–-å®˜ç½‘ä¼ é€é—¨" class="sidebar-link">Vue3 çš„å˜åŒ– å®˜ç½‘ä¼ é€é—¨</a></li><li class="sidebar-sub-header level2"><a href="/wwblog/pages/f8371f/#åˆ›å»º-vue3-å·¥ç¨‹" class="sidebar-link">åˆ›å»º Vue3 å·¥ç¨‹</a></li><li class="sidebar-sub-header level2"><a href="/wwblog/pages/f8371f/#vue3-é¡¹ç›®ç»“æ„" class="sidebar-link">Vue3 é¡¹ç›®ç»“æ„</a></li><li class="sidebar-sub-header level2"><a href="/wwblog/pages/f8371f/#å¸¸ç”¨-composition-api" class="sidebar-link">å¸¸ç”¨ Composition API</a></li><li class="sidebar-sub-header level2"><a href="/wwblog/pages/f8371f/#å…¶å®ƒ-composition-api" class="sidebar-link">å…¶å®ƒ Composition API</a></li><li class="sidebar-sub-header level2"><a href="/wwblog/pages/f8371f/#compositon-api-çš„ä¼˜åŠ¿" class="sidebar-link">Compositon API çš„ä¼˜åŠ¿</a></li><li class="sidebar-sub-header level2"><a href="/wwblog/pages/f8371f/#æ–°çš„ç»„ä»¶" class="sidebar-link">æ–°çš„ç»„ä»¶</a></li><li class="sidebar-sub-header level2"><a href="/wwblog/pages/f8371f/#å…¶ä»–æ”¹å˜" class="sidebar-link">å…¶ä»–æ”¹å˜</a></li><li class="sidebar-sub-header level2"><a href="/wwblog/pages/f8371f/#ç»„ä»¶ä¸Šçš„-v-model" class="sidebar-link">ç»„ä»¶ä¸Šçš„ v-model</a></li><li class="sidebar-sub-header level2"><a href="/wwblog/pages/f8371f/#eventbus" class="sidebar-link">EventBus</a></li><li class="sidebar-sub-header level2"><a href="/wwblog/pages/f8371f/#vue-3-x-å…¨å±€é…ç½®-axios" class="sidebar-link">vue 3.x å…¨å±€é…ç½® axios</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Pinia</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wwblog/pages/087eee/" class="sidebar-link">Pinia</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vite</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wwblog/pages/b2b4ce/" class="sidebar-link">Vite</a></li><li><a href="/wwblog/pages/0f8172/" class="sidebar-link">Webpack</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>å°ç¨‹åº</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wwblog/pages/56b587/" class="sidebar-link">wxå°ç¨‹åº</a></li><li><a href="/wwblog/pages/dace69/" class="sidebar-link">Taroå¤šç«¯</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æ¡Œé¢åº”ç”¨ç¨‹åº</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wwblog/pages/1c2e60/" class="sidebar-link">Eletron</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-f8b55ed6><div class="articleInfo" data-v-f8b55ed6><ul class="breadcrumbs" data-v-f8b55ed6><li data-v-f8b55ed6><a href="/wwblog/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-f8b55ed6></a></li> <li data-v-f8b55ed6><span data-v-f8b55ed6>Vue</span></li> <!----></ul> <div class="info" data-v-f8b55ed6><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-f8b55ed6><a href="https://github.com/MX-lbw" target="_blank" title="ä½œè€…" class="beLink" data-v-f8b55ed6>wuwei</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-f8b55ed6><a href="javascript:;" data-v-f8b55ed6>2023-04-03</a></div> <div class="page-view" style="margin-left:0;" data-v-47d906e8 data-v-f8b55ed6><div title="æ–‡ç« å­—æ•°" class="book-words iconfont icon-book" data-v-47d906e8><a href="javascript:;" style="margin-left: 3px; color: #888" data-v-47d906e8>0</a></div> <!----> <div title="æµè§ˆé‡" class="page-view iconfont icon-view" data-v-47d906e8><a href="javascript:;" id="busuanzi_value_page_pv" class="view-data" style="color: #888; margin-left: 3px" data-v-47d906e8><i title="æ­£åœ¨è·å–..." class="loading iconfont icon-loading" data-v-47d906e8></i></a></div></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">ç›®å½•</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">vue3<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="vue3"><a href="#vue3" class="header-anchor">#</a> Vue3</h1> <h2 id="vue3-çš„å˜åŒ–-å®˜ç½‘ä¼ é€é—¨"><a href="#vue3-çš„å˜åŒ–-å®˜ç½‘ä¼ é€é—¨" class="header-anchor">#</a> Vue3 çš„å˜åŒ– <a href="https://v3.cn.vuejs.org/" target="_blank" rel="noopener noreferrer">å®˜ç½‘ä¼ é€é—¨<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <p><strong><em>æ€§èƒ½çš„æå‡</em></strong></p> <ul><li>æ‰“åŒ…å¤§å°å‡å°‘ 41%</li> <li>åˆæ¬¡æ¸²æŸ“å¿« 55%, æ›´æ–°æ¸²æŸ“å¿« 133%</li> <li>å†…å­˜å‡å°‘ 54%</li></ul> <p><strong><em>æºç çš„å‡çº§</em></strong></p> <ul><li>ä½¿ç”¨ Proxy ä»£æ›¿ defineProperty å®ç°å“åº”å¼</li> <li>é‡å†™è™šæ‹Ÿ DOM çš„å®ç°å’Œ Tree-Shaking</li></ul> <p><strong><em>æ‹¥æŠ± TypeScript</em></strong></p> <ul><li>Vue3 å¯ä»¥æ›´å¥½çš„æ”¯æŒ TypeScript</li></ul> <p><strong><em>æ–°çš„ç‰¹æ€§</em></strong></p> <ol><li>Composition APIï¼ˆç»„åˆ APIï¼‰</li></ol> <ul><li>setup é…ç½®</li> <li>ref ä¸ reactive</li> <li>watch ä¸ watchEffect</li> <li>provide ä¸ inject</li> <li>......</li></ul> <ol start="2"><li>æ–°çš„å†…ç½®ç»„ä»¶</li></ol> <ul><li>Fragment</li> <li>Teleport</li> <li>Suspense</li></ul> <ol start="3"><li>å…¶ä»–æ”¹å˜</li></ol> <ul><li>æ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­</li> <li>data é€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°</li> <li>ç§»é™¤ keyCode æ”¯æŒä½œä¸º v-on çš„ä¿®é¥°ç¬¦</li> <li>......</li></ul> <h2 id="åˆ›å»º-vue3-å·¥ç¨‹"><a href="#åˆ›å»º-vue3-å·¥ç¨‹" class="header-anchor">#</a> åˆ›å»º Vue3 å·¥ç¨‹</h2> <h3 id="vite-å’Œ-vue-cli-å¯¹æ¯”"><a href="#vite-å’Œ-vue-cli-å¯¹æ¯”" class="header-anchor">#</a> vite å’Œ vue-cli å¯¹æ¯”</h3> <table><thead><tr><th></th> <th>vite</th> <th>vue-cli</th></tr></thead> <tbody><tr><td>æ”¯æŒçš„ vue ç‰ˆæœ¬</td> <td>ä»…æ”¯æŒ vue3.x</td> <td>æ”¯æŒ 2.x å’Œ 3.x</td></tr> <tr><td>æ˜¯å¦åŸºäº webpack</td> <td>å¦</td> <td>æ˜¯</td></tr> <tr><td>è¿è¡Œé€Ÿåº¦</td> <td>å¿«</td> <td>è¾ƒæ…¢</td></tr> <tr><td>åŠŸèƒ½å®Œæ•´åº¦</td> <td>å°è€Œå·§</td> <td>å¤§è€Œå…¨</td></tr> <tr><td>æ˜¯å¦å»ºè®®ä¼ä¸šçº§å¼€å‘ä½¿ç”¨</td> <td>æš‚ä¸å»ºè®®</td> <td>å»ºè®®</td></tr></tbody></table> <h3 id="ä½¿ç”¨-vue-cli-åˆ›å»º"><a href="#ä½¿ç”¨-vue-cli-åˆ›å»º" class="header-anchor">#</a> ä½¿ç”¨ vue-cli åˆ›å»º</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">### æŸ¥çœ‹ @vue/cli ç‰ˆæœ¬ï¼Œç¡®ä¿ @vue/cli ç‰ˆæœ¬åœ¨4.5.0ä»¥ä¸Š</span>
vue <span class="token parameter variable">--version</span>
<span class="token comment">### å®‰è£…æˆ–è€…å‡çº§ @vue/cli</span>
<span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> @vue/cli
<span class="token comment">### åˆ›å»º</span>
vue create vue_test
<span class="token comment">### å¯åŠ¨</span>
<span class="token builtin class-name">cd</span> vue_test
<span class="token function">npm</span> run serve
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="ä½¿ç”¨-vite-åˆ›å»º"><a href="#ä½¿ç”¨-vite-åˆ›å»º" class="header-anchor">#</a> ä½¿ç”¨ vite åˆ›å»º</h3> <ul><li><a href="https://vitejs.cn" target="_blank" rel="noopener noreferrer">vite<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼šæ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·</li> <li>ä¼˜åŠ¿ï¼š
<ul><li>å¼€å‘ç¯å¢ƒä¸­ï¼Œæ— éœ€æ‰“åŒ…æ“ä½œï¼Œå¯å¿«é€Ÿå†·å¯åŠ¨ï¼ˆwebpack æ¯æ¬¡è¿è¡Œé¡¹ç›®éƒ½è¦æ‰“åŒ…ï¼‰</li> <li>è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½ HMRï¼ˆæ›´æ”¹ä»£ç å±€éƒ¨åˆ·æ–°ï¼Œwebpack ä¹Ÿè¡Œï¼Œä½† vite æ›´è½»é‡ï¼‰</li> <li>çœŸæ­£çš„æŒ‰éœ€ç¼–è¯‘ï¼Œæ— éœ€ç­‰å¾…æ•´ä¸ªåº”ç”¨ç¼–è¯‘å®Œæˆ</li></ul></li> <li>ä¼ ç»Ÿæ„å»º ä¸ vite æ„å»ºå¯¹æ¯”ï¼ˆvite ç°ç”¨ç°åˆ†æï¼ŒæŒ‰éœ€å¯¼å…¥ï¼Œå› æ­¤é¡¹ç›®å¯åŠ¨æ›´å¿«ï¼‰</li></ul> <p><img src="/wwblog/assets/img/bundle.532fd73f.png" alt="Image from alias"></p> <p><img src="/wwblog/assets/img/ESM.9634d534.png" alt="Image from alias"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> init vite-app é¡¹ç›®åç§°

<span class="token builtin class-name">cd</span> é¡¹ç›®åç§°
<span class="token function">npm</span> <span class="token function">install</span>
<span class="token function">npm</span> run dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="vue3-é¡¹ç›®ç»“æ„"><a href="#vue3-é¡¹ç›®ç»“æ„" class="header-anchor">#</a> Vue3 é¡¹ç›®ç»“æ„</h2> <p>Vue3 ä¸­ <code>main.js</code> ä»£ç æœ‰æ‰€æ”¹å˜ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ä¸å†å¼•å…¥ Vue æ„é€ å‡½æ•°ï¼Œè€Œæ˜¯å¼•å…¥ createApp å·¥å‚å‡½æ•°</span>
<span class="token comment">// createAppå‡½æ•°ï¼šåˆ›å»º vue çš„ SPA å®ä¾‹</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App.vue&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// åˆ›å»ºåº”ç”¨å®ä¾‹å¯¹è±¡</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Vue3 æ”¯æŒå®šä¹‰å¤šä¸ªæ ¹èŠ‚ç‚¹ï¼Œç»„ä»¶çš„ <code>&lt;template&gt;</code> æ”¯æŒå®šä¹‰å¤šä¸ªæ ¹èŠ‚ç‚¹ï¼š</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>æ ¹èŠ‚ç‚¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>æ ¹èŠ‚ç‚¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="å¸¸ç”¨-composition-api"><a href="#å¸¸ç”¨-composition-api" class="header-anchor">#</a> å¸¸ç”¨ Composition API</h2> <h3 id="setup"><a href="#setup" class="header-anchor">#</a> setup</h3> <ul><li>setup æ˜¯ Vue3 ä¸­ä¸€ä¸ªæ–°çš„é…ç½®é¡¹ï¼Œå€¼ä¸ºå‡½æ•°</li> <li>ç»„ä»¶ä¸­ä½¿ç”¨çš„æ•°æ®ã€æ–¹æ³•ç­‰éƒ½è¦é…ç½®åœ¨ setup ä¸­</li> <li>setup å‡½æ•°ä¸¤ç§è¿”å›å€¼ï¼š
<ul><li>è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­çš„å±æ€§ã€æ–¹æ³•å¯åœ¨æ¨¡æ¿ä¸­ç›´æ¥ä½¿ç”¨</li> <li>è¿”å›ä¸€ä¸ªæ¸²æŸ“å‡½æ•°ï¼Œå¯è‡ªå®šä¹‰æ¸²æŸ“å†…å®¹</li></ul></li> <li>setup å‡½æ•°çš„å‚æ•°ï¼š
<ul><li>propsï¼šå€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«äº†ç»„ä»¶å¤–éƒ¨ä¼ è¿›æ¥ï¼Œä¸”ç»„ä»¶å†…éƒ¨å£°æ˜æ¥æ”¶çš„å±æ€§</li> <li>contextï¼šä¸Šä¸‹æ–‡å¯¹è±¡
<ul><li><code>attrs</code>ï¼šå€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«äº†ç»„ä»¶å¤–éƒ¨ä¼ è¿›æ¥ï¼Œä¸”ç»„ä»¶å†…éƒ¨æ²¡æœ‰å£°æ˜æ¥æ”¶çš„å±æ€§ï¼Œç›¸å½“äº <code>this.$attrs</code></li> <li><code>slots</code>ï¼šæ”¶åˆ°çš„æ’æ§½å†…å®¹ï¼Œç›¸å½“äº <code>this.$slots</code></li> <li><code>emit</code>ï¼šè§¦å‘è‡ªå®šä¹‰äº‹ä»¶çš„å‡½æ•°ï¼Œç›¸å½“äº <code>this.$emit</code></li></ul></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// æ²¡é”™ï¼Œæ¸²æŸ“å‡½æ•°å°±å« h</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> h <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;App&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// Vue3 éœ€è¦å£°æ˜è‡ªå®šä¹‰äº‹ä»¶ï¼Œè™½ç„¶ä¸å£°æ˜ä¹Ÿèƒ½è¿è¡Œ</span>
  <span class="token literal-property property">emits</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;changeCount&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token comment">// è¿”å›å‡½æ•°</span>
  <span class="token comment">/*
  setup() {
    return () =&gt; h('h1', 'Hello')
  },
  */</span>

  <span class="token comment">// è¿”å›å¯¹è±¡</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">&quot;Vue3&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      context<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;changeCount&quot;</span><span class="token punctuation">,</span> <span class="token number">888</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      name<span class="token punctuation">,</span>
      sayHello<span class="token punctuation">,</span>
      test<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>æ³¨æ„ï¼š</p> <ul><li>setup åœ¨ <code>beforeCreate</code> é’©å­ä¹‹å‰æ‰§è¡Œï¼Œ<code>this</code> ä¸º <code>undefined</code></li> <li>setup ä¸è¦å’Œ Vue2 é…ç½®æ··ç”¨ã€‚Vue2 çš„é…ç½®å¯ä»¥è®¿é—®åˆ° setup çš„å±æ€§æ–¹æ³•ï¼Œåè¿‡æ¥ä¸è¡Œï¼›å¦‚æœ‰é‡åï¼Œsetup ä¼˜å…ˆ</li> <li>setup ä¸èƒ½æ˜¯ async å‡½æ•°ï¼Œå› ä¸º async å‡½æ•°è¿”å›çš„æ˜¯ promise ä¸æ˜¯å¯¹è±¡ï¼Œä¼šå¯¼è‡´æ¨¡æ¿æ— æ³•è®¿é—®å±æ€§æ–¹æ³•</li> <li>è‹¥è¦è¿”å› promise å®ä¾‹ï¼Œéœ€è¦ <code>Suspense</code> å’Œå¼‚æ­¥ç»„ä»¶çš„é…åˆ</li></ul> <h3 id="ref-å‡½æ•°"><a href="#ref-å‡½æ•°" class="header-anchor">#</a> ref å‡½æ•°</h3> <p>ä½œç”¨ï¼šå®šä¹‰å“åº”å¼æ•°æ®</p> <p>è¯­æ³•ï¼š<code>const name = ref(initValue)</code></p> <ul><li><code>ref</code> å‡½æ•°è¿”å›ä¸€ä¸ª <code>RefImpl</code>(reference implement) å®ä¾‹å¯¹è±¡ï¼Œå…¨ç§°å¼•ç”¨å®ç°çš„å®ä¾‹å¯¹è±¡</li> <li>å®ƒåŒ…å«å“åº”å¼æ•°æ®ï¼Œç®€ç§°å¼•ç”¨å¯¹è±¡ã€reference å¯¹è±¡ã€ref å¯¹è±¡</li> <li>JS è®¿é—®æ•°æ®ï¼š<code>name.value</code></li> <li>æ¨¡æ¿è®¿é—®æ•°æ®ï¼š<code>&lt;div&gt;&lt;/div&gt;</code></li></ul> <p>æ³¨æ„äº‹é¡¹ï¼š</p> <ul><li><code>ref</code> å‡½æ•°å¯ä»¥æ¥æ”¶åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹</li> <li>åŸºæœ¬ç±»å‹æ•°æ®çš„å“åº”å¼è¿˜æ˜¯é  <code>Object.defineProperty()</code> å®Œæˆ</li> <li>å¯¹è±¡ç±»å‹æ•°æ®ä½¿ç”¨ ES6 çš„ Proxy å®ç°å“åº”å¼ï¼ŒVue3 æŠŠç›¸å…³æ“ä½œå°è£…åœ¨ <code>reactive</code> å‡½æ•°ä¸­</li> <li>æŒ‰ç…§ä¹‹å‰çš„åŠæ³•ï¼Œå¯¹äºå¯¹è±¡æ•°æ®ï¼Œåº”è¯¥éå†æ¯ä¸€å±‚çš„å±æ€§æ·»åŠ  <code>getter</code> ã€<code>setter</code>ï¼Œä½† Vue3 ä½¿ç”¨ Proxy æŠŠå†…éƒ¨æ•°æ®ä¸€å£æ°”ç›‘æµ‹äº†</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>{{ name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ jobInfo.type }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;Vue3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> jobInfo <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;frontend&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">salary</span><span class="token operator">:</span> <span class="token string">&quot;40w&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">changeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      name<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;é±¿é±¼ä¸&quot;</span><span class="token punctuation">;</span>
      <span class="token comment">// jobInfo æ˜¯ RefImpl å®ä¾‹</span>
      <span class="token comment">// jobInfo.value æ˜¯ Proxy å®ä¾‹å¯¹è±¡</span>
      jobInfo<span class="token punctuation">.</span>value<span class="token punctuation">.</span>salary <span class="token operator">=</span> <span class="token string">&quot;50w&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      name<span class="token punctuation">,</span>
      jobInfo<span class="token punctuation">,</span>
      changeInfo<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="reactive-å‡½æ•°"><a href="#reactive-å‡½æ•°" class="header-anchor">#</a> reactive å‡½æ•°</h3> <ul><li>å®šä¹‰å¼•ç”¨ç±»å‹çš„å“åº”å¼æ•°æ®ï¼Œä¸å¯ç”¨äº jibenleixingshuju</li> <li><code>const ä»£ç†å¯¹è±¡ = reactive(æºå¯¹è±¡)</code> æ¥æ”¶å¯¹è±¡æˆ–æ•°ç»„ï¼Œè¿”å›ä»£ç†å¯¹è±¡ï¼ˆProxy çš„å®ä¾‹å¯¹è±¡ï¼‰</li> <li><code>reactive</code> çš„å“åº”å¼æ˜¯æ·±åº¦çš„</li> <li>åŸºäº ES6 çš„ Proxy å®ç°ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡æ“ä½œæºå¯¹è±¡å†…éƒ¨æ•°æ®</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Vue3&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">sex</span><span class="token operator">:</span> <span class="token string">&quot;unknown&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">info</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">school</span><span class="token operator">:</span> <span class="token string">&quot;Oxford&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">major</span><span class="token operator">:</span> <span class="token string">&quot;computer&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> color <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;blue&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">changeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      person<span class="token punctuation">.</span>info<span class="token punctuation">.</span>major <span class="token operator">=</span> <span class="token string">&quot;art&quot;</span><span class="token punctuation">;</span>
      color<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;yellow&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      person<span class="token punctuation">,</span>
      color<span class="token punctuation">,</span>
      changeInfo<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="ref-vs-reactive"><a href="#ref-vs-reactive" class="header-anchor">#</a> ref VS reactive</h3> <p>å®šä¹‰æ•°æ®ï¼š</p> <ul><li>ref ç”¨äºå®šä¹‰åŸºæœ¬ç±»å‹æ•°æ®</li> <li>reactive ç”¨äºå®šä¹‰å¯¹è±¡æˆ–æ•°ç»„ç±»å‹æ•°æ®</li> <li>ref ä¹Ÿå¯å®šä¹‰å¯¹è±¡æˆ–æ•°ç»„ç±»å‹æ•°æ®ï¼Œå†…éƒ¨é€šè¿‡ reactive è½¬ä¸ºä»£ç†å¯¹è±¡</li> <li>ä¸€èˆ¬ä½¿ç”¨ reactive å‡½æ•°ï¼Œå¯ä»¥æŠŠæ‰€æœ‰æ•°æ®å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡</li></ul> <p>åŸç†ï¼š</p> <ul><li>ref é€šè¿‡ <code>Object.defineProperty()</code> å®ç°å“åº”å¼</li> <li>reactive é€šè¿‡ Proxy å®ç°å“åº”å¼ï¼ŒReflect æ“ä½œæºå¯¹è±¡æ•°æ®</li></ul> <p>ä½¿ç”¨è§’åº¦ï¼š</p> <ul><li>ref å®šä¹‰æ•°æ®ï¼Œè®¿é—®æ•°æ®éœ€è¦ <code>.value</code>ï¼Œæ¨¡æ¿ä¸­ä¸éœ€è¦</li> <li>reactive å®šä¹‰çš„æ•°æ®ï¼Œéƒ½ä¸éœ€è¦</li></ul> <h3 id="vue3-å“åº”å¼åŸç†"><a href="#vue3-å“åº”å¼åŸç†" class="header-anchor">#</a> Vue3 å“åº”å¼åŸç†</h3> <ul><li>é€šè¿‡ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy" target="_blank" rel="noopener noreferrer">Proxy<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ä»£ç†ï¼Œæ‹¦æˆªå¯¹å¯¹è±¡å±æ€§çš„æ“ä½œï¼ŒåŒ…æ‹¬å¢åˆ æ”¹æŸ¥</li> <li>é€šè¿‡ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect" target="_blank" rel="noopener noreferrer">Reflect<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> åå°„ï¼Œå¯¹æºå¯¹è±¡çš„å±æ€§è¿›è¡Œæ“ä½œ</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> originPerson <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Lily&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>originPerson<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// æ‹¦æˆªå¢åŠ å’ŒæŸ¥è¯¢æ“ä½œ</span>
  <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è¯»å–æºå¯¹è±¡çš„å±æ€§</span>
    <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>originPerson<span class="token punctuation">,</span> prop<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// æ‹¦æˆªä¿®æ”¹æ“ä½œ</span>
  <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä¿®æ”¹æºå¯¹è±¡çš„å±æ€§</span>
    <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// æ‹¦æˆªåˆ é™¤æ“ä½œ</span>
  <span class="token function">deleteProperty</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> prop</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// åˆ é™¤æºå¯¹è±¡çš„å±æ€§</span>
    <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">deleteProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
person<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">33</span><span class="token punctuation">;</span>
person<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">&quot;unknown&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">delete</span> person<span class="token punctuation">.</span>age<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="computed-å‡½æ•°"><a href="#computed-å‡½æ•°" class="header-anchor">#</a> computed å‡½æ•°</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">&quot;Cai&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">&quot;QP&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// è®¡ç®—å±æ€§ç®€å†™å½¢å¼</span>
    person<span class="token punctuation">.</span>fullName <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> person<span class="token punctuation">.</span>firstName <span class="token operator">+</span> <span class="token string">&quot;-&quot;</span> <span class="token operator">+</span> person<span class="token punctuation">.</span>lastName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// è®¡ç®—å±æ€§å®Œæ•´å½¢å¼</span>
    person<span class="token punctuation">.</span>fullName <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> person<span class="token punctuation">.</span>firstName <span class="token operator">+</span> <span class="token string">&quot;-&quot;</span> <span class="token operator">+</span> person<span class="token punctuation">.</span>lastName<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> arr <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        person<span class="token punctuation">.</span>firstName <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        person<span class="token punctuation">.</span>lastName <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      person<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h3 id="watch-å‡½æ•°"><a href="#watch-å‡½æ•°" class="header-anchor">#</a> watch å‡½æ•°</h3> <div class="custom-block tip"><p class="custom-block-title">Vue3 `watch` èƒ½ä¾¦å¬çš„ä¸œè¥¿</p> <p>A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types</p></div> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> reactive<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token operator">...</span>

<span class="token comment">// æ•°æ®</span>
<span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> msg <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Vue3'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token literal-property property">info</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">job</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">salary</span><span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong><em>ä¾¦å¬ ref å®šä¹‰çš„å“åº”å¼æ•°æ®ï¼š</em></strong></p> <ul><li>æ³¨æ„ä¸è¦å†™æˆ <code>sum.value</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// å‚æ•°ï¼šä¾¦å¬çš„æ•°æ®ï¼Œå›è°ƒï¼Œå…¶ä»–é…ç½®</span>
<span class="token function">watch</span><span class="token punctuation">(</span>
  sum<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newVal<span class="token punctuation">,</span> oldVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">immediate</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong><em>ä¾¦å¬å¤šä¸ª ref å®šä¹‰çš„å“åº”å¼æ•°æ®ï¼š</em></strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// newValï¼ŒoldVal ä¹Ÿæ˜¯æ•°ç»„</span>
<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>sum<span class="token punctuation">,</span> msg<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newVal<span class="token punctuation">,</span> oldVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong><em>ä¾¦å¬ ref å®šä¹‰çš„å¯¹è±¡ç±»å‹æ•°æ®ï¼š</em></strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ç”¨ ref å®šä¹‰å¯¹è±¡ç±»å‹æ•°æ®</span>
<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Vue3'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token literal-property property">info</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">job</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">salary</span><span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// å¼€å¯æ·±åº¦ç›‘å¬æ‰æœ‰æ•ˆï¼Œæ­¤æ—¶ç›‘å¬çš„æ˜¯ RefImpl å®ä¾‹</span>
<span class="token comment">// Ref å®ä¾‹çš„ value æ˜¯ Proxy å¯¹è±¡ï¼Œå­˜çš„æ˜¯åœ°å€</span>
<span class="token comment">// å› æ­¤æ— æ³•ç›‘å¬ person å†…éƒ¨å±æ€§çš„å˜åŒ–</span>
<span class="token function">watch</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">deep</span><span class="token operator">:</span><span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// è¿™ä¸ªå’Œ â€œä¾¦å¬ reactive å‡½æ•°ç›´æ¥è¿”å›çš„é‚£ä¸€æ•´å¨å“åº”å¼æ•°æ®â€ æ•ˆæœä¸€è‡´</span>
<span class="token function">watch</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>value<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><strong><em>ä¾¦å¬ reactive å‡½æ•°ç›´æ¥è¿”å›çš„é‚£ä¸€æ•´å¨å“åº”å¼æ•°æ®ï¼š</em></strong></p> <ul><li>oldVal æ˜¯é”™è¯¯çš„ï¼å’Œ newVal çš„å€¼ä¸€æ ·</li> <li>å¼ºåˆ¶å¼€å¯äº†æ·±åº¦ä¾¦å¬ï¼Œ<code>deep</code> é…ç½®ä¸ç”Ÿæ•ˆï¼</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">watch</span><span class="token punctuation">(</span>
  person<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newVal<span class="token punctuation">,</span> oldVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">immediate</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong><em>ä¾¦å¬ reactive å®šä¹‰çš„å“åº”å¼æ•°æ®æŸä¸ªå±æ€§ï¼š</em></strong></p> <ul><li>å¦‚æœæ˜¯ <code>() =&gt; person.info</code> oldVal ä¹Ÿæ˜¯é”™è¯¯çš„ï¼</li> <li><code>() =&gt; person.name</code> oldVal æ˜¯æ­£ç¡®çš„ï¼Œä½•æ—¶å¯¹ä½•æ—¶é”™è‡ªå·±ç¢ç£¨å§ï¼</li> <li>æ­¤å¤„æ²¡æœ‰å¼ºåˆ¶å¼€å¯æ·±åº¦ç›‘å¬</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// å¦‚æœç›‘è§†çš„å±æ€§è¿˜æ˜¯å¯¹è±¡ï¼Œåˆ™éœ€è¦å¼€å¯æ·±åº¦ç›‘å¬</span>
<span class="token function">watch</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> person<span class="token punctuation">.</span>info<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newVal<span class="token punctuation">,</span> oldVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong><em>ä¾¦å¬ reactive å®šä¹‰çš„å“åº”å¼æ•°æ®å¤šä¸ªå±æ€§ï¼š</em></strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">watch</span><span class="token punctuation">(</span>
  <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> person<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> person<span class="token punctuation">.</span>info<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newVal<span class="token punctuation">,</span> oldVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="watcheffect-å‡½æ•°"><a href="#watcheffect-å‡½æ•°" class="header-anchor">#</a> watchEffect å‡½æ•°</h3> <ul><li><code>watchEffect</code> ä¸éœ€è¦æŒ‡æ˜ç›‘å¬å“ªä¸ªå±æ€§ï¼Œå›è°ƒé‡Œç”¨åˆ°å“ªä¸ªå±æ€§ï¼Œå°±è‡ªåŠ¨ç›‘å¬å“ªä¸ªå±æ€§</li> <li><code>computed</code> æ³¨é‡è®¡ç®—çš„å€¼ï¼Œå³å›è°ƒå‡½æ•°çš„è¿”å›å€¼ï¼Œå› æ­¤å¿…é¡»æœ‰è¿”å›å€¼</li> <li><code>watchEffect</code> æ›´æ³¨é‡è¿‡ç¨‹ï¼Œå³å›è°ƒå‡½æ•°çš„å‡½æ•°ä½“ï¼Œå› æ­¤å¯æ²¡æœ‰è¿”å›å€¼</li> <li><code>watchEffect</code> æ²¡æœ‰å¼€å¯æ·±åº¦ç›‘å¬ï¼Œä¹Ÿä¸èƒ½å¼€å¯æ·±åº¦ç›‘å¬ï¼</li> <li><code>watchEffect</code> å†…éƒ¨è‡ªè¡Œä¿®æ”¹æ•°æ®ï¼Œä¸ä¼šé‡æ–°è°ƒç”¨å›è°ƒï¼Œå› æ­¤ä¸ä¼šå‡ºç°é€’å½’è°ƒç”¨</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// å›è°ƒä¸­ç”¨åˆ°çš„æ•°æ®åªè¦å‘ç”Ÿå˜åŒ–ï¼Œåˆ™ç›´æ¥é‡æ–°æ‰§è¡Œå›è°ƒ</span>
<span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> total <span class="token operator">=</span> sum<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
  <span class="token keyword">let</span> p <span class="token operator">=</span> person<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;watchEffect...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="header-anchor">#</a> ç”Ÿå‘½å‘¨æœŸ</h3> <p>æ³¨æ„å’Œ <code>vue2.x</code> çš„ç”Ÿå‘½å‘¨æœŸå›¾ä½œå¯¹æ¯”ï¼Œ<code>beforeDestroy</code> å’Œ <code>destroyed</code> å˜ä¸º <code>beforeUnmount</code> å’Œ <code>unmounted</code> ã€‚</p> <p><img src="/wwblog/assets/img/lifecycle.e6900649.png" alt="Image from alias"></p> <p>Vue3 ä¹Ÿæä¾›äº† Composition API å½¢å¼çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä¸ Vue2 ä¸­é’©å­å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š</p> <ul><li><code>beforeCreate</code>===&gt;<code>setup()</code></li> <li><code>created</code>=======&gt;<code>setup()</code></li> <li><code>beforeMount</code> ===&gt;<code>onBeforeMount</code></li> <li><code>mounted</code>=======&gt;<code>onMounted</code></li> <li><code>beforeUpdate</code>===&gt;<code>onBeforeUpdate</code></li> <li><code>updated</code> =======&gt;<code>onUpdated</code></li> <li><code>beforeUnmount</code>Â ==&gt;<code>onBeforeUnmount</code></li> <li><code>unmounted</code> =====&gt;<code>onUnmounted</code></li></ul> <p>è‹¥å’Œé…ç½®é¡¹ç”Ÿå‘½é’©å­ä¸€èµ·ä½¿ç”¨ï¼Œåˆ™ç»„åˆå¼ä¼šæ¯”é…ç½®é¡¹çš„å…ˆæ‰§è¡Œï¼Œå¦‚ <code>onBeforeMount</code> å…ˆäº <code>beforeMount</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> onBeforeMount<span class="token punctuation">,</span> onMounted<span class="token punctuation">,</span> onBeforeUpdate<span class="token punctuation">,</span> onUpdated<span class="token punctuation">,</span> onBeforeUnmount<span class="token punctuation">,</span> onUnmounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'---setup---'</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

  <span class="token comment">//é€šè¿‡ç»„åˆå¼APIçš„å½¢å¼å»ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸé’©å­</span>
  <span class="token function">onBeforeMount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'---onBeforeMount---'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'---onMounted---'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">onBeforeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'---onBeforeUpdate---'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">onUpdated</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'---onUpdated---'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">onBeforeUnmount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'---onBeforeUnmount---'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">onUnmounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'---onUnmounted---'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>sum<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="hook-å‡½æ•°"><a href="#hook-å‡½æ•°" class="header-anchor">#</a> hook å‡½æ•°</h3> <ul><li>hook æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠ setup å‡½æ•°çš„ Composition API è¿›è¡Œäº†å°è£…</li> <li>ç±»ä¼¼ Vue2 çš„ Mixinï¼Œèƒ½å¤ç”¨ä»£ç ï¼Œè®© setup é‡Œçš„é€»è¾‘æ›´æ¸…æ™°</li> <li>hook æ”¾åœ¨ hooks æ–‡ä»¶å¤¹ä¸­ï¼Œä¸€ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ªåŠŸèƒ½æ¨¡å—ï¼Œä»¥ <code>useXxx</code> å‘½å</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// hooks/usePoint.js</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> onMounted<span class="token punctuation">,</span> onBeforeUnmount <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//å®ç°é¼ æ ‡â€œæ‰“ç‚¹â€ç›¸å…³çš„æ•°æ®</span>
  <span class="token keyword">let</span> point <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//å®ç°é¼ æ ‡â€œæ‰“ç‚¹â€ç›¸å…³çš„æ–¹æ³•</span>
  <span class="token keyword">function</span> <span class="token function">savePoint</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    point<span class="token punctuation">.</span>x <span class="token operator">=</span> event<span class="token punctuation">.</span>pageX<span class="token punctuation">;</span>
    point<span class="token punctuation">.</span>y <span class="token operator">=</span> event<span class="token punctuation">.</span>pageY<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//å®ç°é¼ æ ‡â€œæ‰“ç‚¹â€ç›¸å…³çš„ç”Ÿå‘½å‘¨æœŸé’©å­</span>
  <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> savePoint<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">onBeforeUnmount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> savePoint<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> point<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ä½¿ç”¨ hook</span>
<span class="token keyword">import</span> usePoint <span class="token keyword">from</span> <span class="token string">&quot;../hooks/usePoint.js&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> point <span class="token operator">=</span> <span class="token function">usePoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span> point <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="toref-å‡½æ•°"><a href="#toref-å‡½æ•°" class="header-anchor">#</a> toRef å‡½æ•°</h3> <ul><li>åˆ›å»ºä¸€ä¸ª RefImpl å®ä¾‹å¯¹è±¡ï¼Œå…¶ value å€¼æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡çš„æŸä¸ªå±æ€§ï¼Œä¿®æ”¹ value å€¼ä¼šä¿®æ”¹æºå¯¹è±¡å¯¹åº”çš„å±æ€§</li> <li>åº”ç”¨ï¼šéœ€è¦æŠŠå“åº”å¼å¯¹è±¡çš„æŸä¸ªå±æ€§å•ç‹¬æä¾›ç»™å¤–éƒ¨ä½¿ç”¨</li> <li>æ‰¹é‡åˆ›å»ºï¼š<code>toRefs</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>reactive<span class="token punctuation">,</span> toRef<span class="token punctuation">,</span> toRefs<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token operator">...</span>

<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Vue3'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
    <span class="token literal-property property">info</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">job</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">salary</span><span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ³¨æ„ä¸èƒ½å†™æˆ ref(person.name)ï¼Œè¿™å’Œæºå¯¹è±¡æ˜¯å‰²è£‚å¼€çš„</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token function">toRef</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">salary</span><span class="token operator">:</span> <span class="token function">toRef</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>info<span class="token punctuation">.</span>job<span class="token punctuation">,</span> <span class="token string">'salary'</span><span class="token punctuation">)</span>
    <span class="token comment">// or</span>
    <span class="token operator">...</span><span class="token function">toRefs</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="å…¶å®ƒ-composition-api"><a href="#å…¶å®ƒ-composition-api" class="header-anchor">#</a> å…¶å®ƒ Composition API</h2> <h3 id="shallowreactive-shallowref"><a href="#shallowreactive-shallowref" class="header-anchor">#</a> shallowReactive &amp; shallowRef</h3> <ul><li><code>shallowReactive</code>ï¼šåªå¤„ç†å¯¹è±¡æœ€å¤–å±‚å±æ€§çš„å“åº”å¼ï¼Œå³æµ…å“åº”å¼</li> <li><code>shallowRef</code>ï¼šåŸºæœ¬æ•°æ®ç±»å‹å’Œ <code>ref</code> ç›¸åŒï¼Œå¯¹è±¡æ•°æ®ä¸å†ä¼šè°ƒç”¨ <code>reactive</code>ï¼Œå› æ­¤åªæœ‰å¯¹è±¡å¼•ç”¨æ”¹å˜äº†æ‰æ˜¯å“åº”å¼çš„</li> <li>è‹¥ä¸€ä¸ªå¯¹è±¡æ•°æ®ï¼Œç»“æ„å¾ˆæ·±ï¼Œä½†åªæœ‰æœ€å¤–å±‚å±æ€§å˜åŒ–ï¼Œå¯ç”¨ <code>shallowReactive</code></li> <li>è‹¥ä¸€ä¸ªå¯¹è±¡æ•°æ®ï¼Œå±æ€§ä¸ä¼šæ”¹å˜ï¼Œè€Œæ˜¯ä½¿ç”¨æ–°å¯¹è±¡æ›¿æ¢ï¼Œå¯ç”¨ <code>shallowRef</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> shallowReactive<span class="token punctuation">,</span> shallowRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">shallowReactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Vue3'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
    <span class="token literal-property property">info</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">job</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">salary</span><span class="token operator">:</span> <span class="token number">22</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token function">shallowRef</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    person<span class="token punctuation">,</span>
    x
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="readonly-shallowreadonly"><a href="#readonly-shallowreadonly" class="header-anchor">#</a> readonly &amp; shallowReadonly</h3> <ul><li><code>readonly</code>: è®©ä¸€ä¸ªå“åº”å¼æ•°æ®å˜ä¸ºåªè¯»çš„ï¼ˆæ·±åªè¯»ï¼‰</li> <li><code>shallowReadonly</code>ï¼šè®©ä¸€ä¸ªå“åº”å¼æ•°æ®å˜ä¸ºåªè¯»çš„ï¼ˆæµ…åªè¯»ï¼‰</li> <li>åº”ç”¨åœºæ™¯: ä¸å¸Œæœ›æ•°æ®è¢«ä¿®æ”¹æ—¶ï¼Œå¦‚ä½ ç”¨äº†åˆ«äººçš„å“åº”å¼æ•°æ®ï¼Œä½†æ˜¯åˆ«äººä¸å¸Œæœ›ä½ ä¿®æ”¹æ—¶</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

  sum <span class="token operator">=</span> <span class="token function">readonly</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span>
  person <span class="token operator">=</span> <span class="token function">shallowReadonly</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    sum<span class="token punctuation">,</span>
    person
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="toraw-markraw"><a href="#toraw-markraw" class="header-anchor">#</a> toRaw &amp; markRaw</h3> <p><code>toRaw</code>ï¼š</p> <ul><li>å°†ä¸€ä¸ªç”± <code>reactive</code> ç”Ÿæˆçš„å“åº”å¼å¯¹è±¡è½¬ä¸ºæ™®é€šå¯¹è±¡</li> <li>ç”¨äºè¯»å–å“åº”å¼å¯¹è±¡å¯¹åº”çš„æ™®é€šå¯¹è±¡ï¼Œå¯¹è¯¥æ™®é€šå¯¹è±¡çš„æ“ä½œä¸ä¼šå¼•èµ·é¡µé¢æ›´æ–°</li></ul> <p><code>markRaw</code>ï¼š</p> <ul><li>æ ‡è®°ä¸€ä¸ªå¯¹è±¡ï¼Œè®©å…¶ä¸æˆä¸ºå“åº”å¼å¯¹è±¡</li> <li>æœ‰äº›å€¼ä¸åº”è®¾ç½®ä¸ºå“åº”å¼ï¼Œæ¯”å¦‚å¤æ‚çš„ç¬¬ä¸‰æ–¹åº“</li> <li>å½“æ¸²æŸ“å¤æ‚ä¸”ä¸å˜çš„æ•°æ®æ—¶ï¼Œè·³è¿‡å“åº”å¼è½¬æ¢å¯æé«˜æ€§èƒ½</li></ul> <p>æ³¨æ„ï¼šä»…ä»…è®©æ•°æ®å˜ä¸ºéå“åº”å¼çš„ï¼Œæ•°æ®å˜çš„ä¾æ—§å˜ï¼Œåªæ˜¯æ²¡å¼•èµ·é¡µé¢æ›´æ–°</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">showRawPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token function">toRaw</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
    p<span class="token punctuation">.</span>age<span class="token operator">++</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">addCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> car <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;å¥”é©°&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">40</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    person<span class="token punctuation">.</span>car <span class="token operator">=</span> <span class="token function">markRaw</span><span class="token punctuation">(</span>car<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="customref"><a href="#customref" class="header-anchor">#</a> customRef</h3> <p>åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ refï¼Œå¹¶å¯¹å…¶ä¾èµ–é¡¹è·Ÿè¸ªå’Œæ›´æ–°è§¦å‘è¿›è¡Œæ˜¾å¼æ§åˆ¶</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>keyword<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>{{ keyword }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> customRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Demo&quot;</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è‡ªå®šä¹‰ myRef</span>
    <span class="token keyword">function</span> <span class="token function">myRef</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> timer<span class="token punctuation">;</span>
      <span class="token comment">// é€šè¿‡customRefå»å®ç°è‡ªå®šä¹‰</span>
      <span class="token keyword">return</span> <span class="token function">customRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">track<span class="token punctuation">,</span> trigger</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">//</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//å‘Šè¯‰Vueè¿™ä¸ªvalueå€¼æ˜¯éœ€è¦è¢«â€œè¿½è¸ªâ€çš„</span>
            <span class="token function">track</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> value<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
            timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              value <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
              <span class="token comment">// å‘Šè¯‰Vueå»æ›´æ–°ç•Œé¢</span>
              <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> keyword <span class="token operator">=</span> <span class="token function">myRef</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      keyword<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="provide-inject"><a href="#provide-inject" class="header-anchor">#</a> provide / inject</h3> <p>å®ç°ç¥–å…ˆç»„ä»¶ä¸åä»£ç»„ä»¶ä¹‹é—´é€šä¿¡ã€‚</p> <p><img src="/wwblog/assets/img/provide-inject.840efd40.png" alt="Image from alias"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ç¥–å…ˆç»„ä»¶ä¼ é€’æ•°æ®</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> provide<span class="token punctuation">,</span> reactive<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> car <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

  <span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'sum'</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span>
  <span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'car'</span><span class="token punctuation">,</span> car<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// åä»£ç»„ä»¶æ¥æ”¶æ•°æ®</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> car <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'car'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> sum <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'sum'</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> car<span class="token punctuation">,</span> sum <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="å“åº”å¼æ•°æ®çš„åˆ¤æ–­"><a href="#å“åº”å¼æ•°æ®çš„åˆ¤æ–­" class="header-anchor">#</a> å“åº”å¼æ•°æ®çš„åˆ¤æ–­</h3> <ul><li><code>isRef</code>: æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºä¸€ä¸ª <code>ref</code> å¯¹è±¡</li> <li><code>isReactive</code>: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>reactive</code> åˆ›å»ºçš„å“åº”å¼ä»£ç†</li> <li><code>isReadonly</code>: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>readonly</code> åˆ›å»ºçš„åªè¯»ä»£ç†</li> <li><code>isProxy</code>: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>reactive</code> æˆ–è€… <code>readonly</code> æ–¹æ³•åˆ›å»ºçš„ä»£ç†</li></ul> <h2 id="compositon-api-çš„ä¼˜åŠ¿"><a href="#compositon-api-çš„ä¼˜åŠ¿" class="header-anchor">#</a> Compositon API çš„ä¼˜åŠ¿</h2> <p><strong><em>Options API å­˜åœ¨çš„é—®é¢˜</em></strong></p> <p>ä½¿ç”¨ä¼ ç»Ÿ Options API ä¸­ï¼Œæ–°å¢æˆ–è€…ä¿®æ”¹ä¸€ä¸ªéœ€æ±‚ï¼Œå°±éœ€è¦åˆ†åˆ«åœ¨ dataï¼Œmethodsï¼Œcomputed ç­‰åœ°æ–¹ä¿®æ”¹ã€‚</p> <div style="display:flex;"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f84e4e2c02424d9a99862ade0a2e4114~tplv-k3u1fbpfcp-watermark.image" style="zoom:45%;">
    Â 
    <img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e5ac7e20d1784887a826f6360768a368~tplv-k3u1fbpfcp-watermark.image" style="zoom:50%;"></div> <p><strong><em>Composition API çš„ä¼˜åŠ¿</em></strong></p> <p>å¯ä»¥æ›´åŠ ä¼˜é›…åœ°ç»„ç»‡ä»£ç ã€å‡½æ•°ï¼Œè®©ç›¸å…³åŠŸèƒ½çš„ä»£ç æ›´åŠ æœ‰åºçš„ç»„ç»‡åœ¨ä¸€èµ·ã€‚è¯´ç™½äº†å°±æ˜¯è®©åŒä¸€ä¸ªåŠŸèƒ½çš„ä»£ç æ•´åˆåˆ°ä¸€èµ·ï¼Œæ—¥åä¿®æ”¹ä»£ç ç›´æ¥æ‰¾å¯¹åº”çš„åŠŸèƒ½æ¨¡å—ã€‚</p> <div style="display:flex;margin-left:-30px;"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc0be8211fc54b6c941c036791ba4efe~tplv-k3u1fbpfcp-watermark.image" style="zoom:50%;">
    Â 
    <img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6cc55165c0e34069a75fe36f8712eb80~tplv-k3u1fbpfcp-watermark.image" style="zoom:50%;"></div> <h2 id="æ–°çš„ç»„ä»¶"><a href="#æ–°çš„ç»„ä»¶" class="header-anchor">#</a> æ–°çš„ç»„ä»¶</h2> <h3 id="fragment"><a href="#fragment" class="header-anchor">#</a> Fragment</h3> <ul><li>åœ¨ Vue2 ä¸­: ç»„ä»¶å¿…é¡»æœ‰ä¸€ä¸ªæ ¹æ ‡ç­¾</li> <li>åœ¨ Vue3 ä¸­: ç»„ä»¶å¯ä»¥æ²¡æœ‰æ ¹æ ‡ç­¾, å†…éƒ¨ä¼šå°†å¤šä¸ªæ ‡ç­¾åŒ…å«åœ¨ä¸€ä¸ª <code>Fragment</code> è™šæ‹Ÿå…ƒç´ ä¸­</li> <li>å¥½å¤„: å‡å°‘æ ‡ç­¾å±‚çº§, å‡å°å†…å­˜å ç”¨</li></ul> <h3 id="teleport"><a href="#teleport" class="header-anchor">#</a> Teleport</h3> <ul><li>å°†åŒ…è£¹çš„ HTML ç»“æ„ç§»åŠ¨åˆ°æŒ‡å®šå…ƒç´ çš„æœ«å°¾</li> <li><code>to</code> å±æ€§ä¸º CSS é€‰æ‹©å™¨</li></ul> <p>ç®€æ˜“çš„æ¨¡æ€æ¡†æ•ˆæœï¼š</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>teleport</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isShow<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mask<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialog<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>æˆ‘æ˜¯ä¸€ä¸ªå¼¹çª—<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isShow = false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>å…³é—­å¼¹çª—<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>teleport</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.mask</span> <span class="token punctuation">{</span>
  <span class="token comment">/* é®ç½©å±‚é“ºæ»¡çª—å£ */</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.dialog</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="suspense"><a href="#suspense" class="header-anchor">#</a> Suspense</h3> <p>ç­‰å¾…å¼‚æ­¥ç»„ä»¶æ—¶æ¸²æŸ“é¢å¤–å†…å®¹ï¼Œè®©ç”¨æˆ·ä½“éªŒæ›´å¥½</p> <p>å¼‚æ­¥å¼•å…¥ç»„ä»¶ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineAsyncComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Child <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./components/Child.vue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä½¿ç”¨ <code>Suspense</code> åŒ…è£¹ç»„ä»¶ï¼Œå®é™…ä¸Šæ˜¯å¾€æ’æ§½å¡«å……å†…å®¹ï¼Œ<code>default</code> æ’æ§½å¡«å……ç»„ä»¶å†…å®¹ï¼Œ<code>fallback</code> æ’æ§½å¡«å……ç»„ä»¶åŠ è½½æ—¶æ˜¾ç¤ºçš„å†…å®¹ï¼š</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Suspense</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>default</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Child</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>fallback</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>åŠ è½½ä¸­ï¼Œè¯·ç¨ç­‰...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Suspense</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>å¦å¤–ï¼Œè‹¥ <code>Child</code> ç»„ä»¶çš„ <code>setup</code> å‡½æ•°è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œä¹Ÿèƒ½æ¸²æŸ“ <code>fallback</code> é‡Œçš„å†…å®¹ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>sum<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="å…¶ä»–æ”¹å˜"><a href="#å…¶ä»–æ”¹å˜" class="header-anchor">#</a> å…¶ä»–æ”¹å˜</h2> <ul><li>å…¨å±€ API çš„è½¬ç§»</li></ul> <p>Vue3 å°†å…¨å±€çš„ APIï¼Œå³ï¼š<code>Vue.xxx</code> è°ƒæ•´åˆ°åº”ç”¨å®ä¾‹ <code>app</code> ä¸Šï¼š</p> <table><thead><tr><th>Vue2 å…¨å±€ API</th> <th>Vue3 å®ä¾‹ API</th></tr></thead> <tbody><tr><td>Vue.config.xxx</td> <td>app.config.xxx</td></tr> <tr><td>Vue.config.productionTip</td> <td>ç§»é™¤</td></tr> <tr><td>Vue.component</td> <td>app.component</td></tr> <tr><td>Vue.directive</td> <td>app.directive</td></tr> <tr><td>Vue.mixin</td> <td>app.mixin</td></tr> <tr><td>Vue.use</td> <td>app.use</td></tr> <tr><td>Vue.prototype</td> <td>app.config.globalProperties</td></tr></tbody></table> <ul><li><p><code>data</code> é€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°</p></li> <li><p>è¿‡æ¸¡ç±»åçš„æ›´æ”¹ï¼š</p></li></ul> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/* Vue2 */</span>
<span class="token selector">.v-enter,
.v-leave-to</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.v-leave,
.v-enter-to</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* Vue3 */</span>
<span class="token selector">.v-enter-from,
.v-leave-to</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.v-leave-from,
.v-enter-to</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ul><li>ç§»é™¤ <code>keyCode</code> ä½œä¸º <code>v-on</code> çš„ä¿®é¥°ç¬¦ï¼ŒåŒæ—¶ä¹Ÿä¸å†æ”¯æŒ <code>config.keyCodes</code></li> <li>ç§»é™¤ <code>v-on.native</code>ä¿®é¥°ç¬¦ï¼Œå­ç»„ä»¶æ²¡æœ‰åœ¨ <code>emits: ['close']</code> å£°æ˜çš„è‡ªå®šä¹‰äº‹ä»¶ä½œä¸ºåŸç”Ÿäº‹ä»¶å¤„ç†</li> <li>ç§»é™¤è¿‡æ»¤å™¨ <code>filter</code></li> <li>...</li></ul> <h2 id="ç»„ä»¶ä¸Šçš„-v-model"><a href="#ç»„ä»¶ä¸Šçš„-v-model" class="header-anchor">#</a> ç»„ä»¶ä¸Šçš„ v-model</h2> <p>å½“éœ€è¦ç»´æŠ¤ç»„ä»¶å†…å¤–æ•°æ®çš„åŒæ­¥æ—¶ï¼Œå¯ä»¥åœ¨ç»„ä»¶ä¸Šä½¿ç”¨ <code>v-model</code> æŒ‡ä»¤ã€‚</p> <p>çˆ¶ç»„ä»¶ä¼ å€¼ï¼š</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- çˆ¶ç»„ä»¶ä¼ å€¼ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-counter</span> <span class="token attr-name"><span class="token namespace">v-model:</span>number</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-counter</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å­ç»„ä»¶åœ¨ <code>emits</code> èŠ‚ç‚¹å£°æ˜è‡ªå®šä¹‰äº‹ä»¶ï¼Œæ ¼å¼ä¸º <code>update:xxx</code> ï¼Œè°ƒç”¨ <code>$emit</code> è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;number&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">emits</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;update:number&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;update:number&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>number<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>æ³¨æ„ï¼Œåœ¨ <code>vue3</code> ä¸­ <code>props</code> å±æ€§åŒæ ·æ˜¯åªè¯»çš„ï¼Œä¸Šé¢ <code>this.number++</code> å¹¶æ²¡æœ‰ä¿®æ”¹ <code>number</code> çš„å€¼ã€‚</p> <p>å…¶å®é€šè¿‡ <code>v-bind</code> ä¼ å€¼å’Œç›‘å¬è‡ªå®šä¹‰äº‹ä»¶çš„æ–¹å¼èƒ½å®ç°å’Œ <code>v-model</code> ç›¸åŒçš„æ•ˆæœã€‚</p> <h2 id="eventbus"><a href="#eventbus" class="header-anchor">#</a> EventBus</h2> <p>å€ŸåŠ©äºç¬¬ä¸‰æ–¹çš„åŒ… <code>mitt</code> æ¥åˆ›å»º <code>eventBus</code> å¯¹è±¡ï¼Œä»è€Œå®ç°å…„å¼Ÿç»„ä»¶ä¹‹é—´çš„æ•°æ®å…±äº«ã€‚</p> <p>å®‰è£… <code>mitt</code> ä¾èµ–åŒ…ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> mitt@2.1.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>åˆ›å»ºå…¬å…±çš„ <code>eventBus</code> æ¨¡å—ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> mitt <span class="token keyword">from</span> <span class="token string">&quot;mitt&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// åˆ›å»º EventBus å®ä¾‹å¯¹è±¡</span>
<span class="token keyword">const</span> bus <span class="token operator">=</span> <span class="token function">mitt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> bus<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>æ•°æ®æ¥æ”¶æ–¹è°ƒç”¨ <code>bus.on()</code> ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> bus <span class="token keyword">from</span> <span class="token string">&quot;./eventBus.js&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    bus<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;countChange&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>æ•°æ®æ¥å‘é€æ–¹è°ƒç”¨ <code>bus.emit()</code> è§¦å‘äº‹ä»¶ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> bus <span class="token keyword">from</span> <span class="token string">&quot;./eventBus.js&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">cout</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">addCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
      bus<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;countChange&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="vue-3-x-å…¨å±€é…ç½®-axios"><a href="#vue-3-x-å…¨å±€é…ç½®-axios" class="header-anchor">#</a> vue 3.x å…¨å±€é…ç½® axios</h2> <p>å®é™…é¡¹ç›®å¼€å‘ä¸­ï¼Œå‡ ä¹æ¯ä¸ªç»„ä»¶ä¸­éƒ½ä¼šä½¿ç”¨ <code>axios</code> å‘èµ·æ•°æ®è¯·æ±‚ã€‚æ­¤æ—¶ä¼šé‡åˆ°å¦‚ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š</p> <ul><li>æ¯ä¸ªç»„ä»¶ä¸­éƒ½éœ€è¦å¯¼å…¥ <code>axios</code>ï¼ˆä»£ç è‡ƒè‚¿ï¼‰</li> <li>æ¯æ¬¡å‘è¯·æ±‚éƒ½éœ€è¦å¡«å†™å®Œæ•´çš„è¯·æ±‚è·¯å¾„ï¼ˆä¸åˆ©äºåæœŸçš„ç»´æŠ¤ï¼‰</li></ul> <p>åœ¨ <code>main.js</code> æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// é…ç½®è¯·æ±‚æ ¹è·¯å¾„</span>
axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">&quot;http://api.com&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// å°† axios æŒ‚è½½ä¸º app å…¨å±€è‡ªå®šä¹‰å±æ€§</span>
<span class="token comment">// æ¯ä¸ªç»„ä»¶å¯é€šè¿‡ this.$http è®¿é—®åˆ° axios</span>
app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">.</span>$http <span class="token operator">=</span> axios<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>ç»„ä»¶è°ƒç”¨ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/users&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2024/08/21, 14:10:51</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/wwblog/pages/f90af5/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">vuex</div></a> <a href="/wwblog/pages/087eee/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Pinia</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/wwblog/pages/f90af5/" class="prev">vuex</a></span> <span class="next"><a href="/wwblog/pages/087eee/">Pinia</a>â†’
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="https://github.com/MX-lbw" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://www.jianshu.com/u/b5796d21ef29" title="jianshu" target="_blank" class="iconfont icon-jianshu"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a> 
    | Copyright Â© 2023-2024
    <span>Wu wei | MIT License</span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><!----><div></div><!----></div></div>
    <script src="/wwblog/assets/js/app.0e0201b5.js" defer></script><script src="/wwblog/assets/js/3.e40f20a1.js" defer></script><script src="/wwblog/assets/js/1.6112db0e.js" defer></script><script src="/wwblog/assets/js/21.f7274164.js" defer></script><script src="/wwblog/assets/js/25.f1c8b165.js" defer></script><script src="/wwblog/assets/js/26.8d4e2030.js" defer></script>
  </body>
</html>
